{
	"info": {
		"_postman_id": "81aa7fd2-6f2a-4020-b884-7f89cfb6c66b",
		"name": "CMS ASPSP API requests",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
	},
	"item": [
		{
			"name": "Export",
			"item": [
				{
					"name": "AIS",
					"item": [
						{
							"name": "1. Set redirect SCA approach",
							"event": [
								{
									"listen": "test",
									"script": {
										"id": "552b7202-62c8-4789-b55f-a4c952eaa7fd",
										"exec": [
											"pm.test(\"Status code is 200\", () => {",
											"    pm.response.to.have.status(200);",
											"});",
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"method": "PUT",
								"header": [
									{
										"key": "Content-Type",
										"name": "Content-Type",
										"value": "application/json",
										"type": "text"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "[\n  \"REDIRECT\",\n  \"EMBEDDED\",\n  \"DECOUPLED\"\n]"
								},
								"url": {
									"raw": "{{protocol}}://{{url_aspsp_profile}}/api/v1/aspsp-profile/for-debug/sca-approaches",
									"protocol": "{{protocol}}",
									"host": [
										"{{url_aspsp_profile}}"
									],
									"path": [
										"api",
										"v1",
										"aspsp-profile",
										"for-debug",
										"sca-approaches"
									]
								}
							},
							"response": []
						},
						{
							"name": "2. Creates AIS consent",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"id": "5cdc0d8d-4773-477a-a454-81327f8fd25e",
										"exec": [
											"pm.globals.unset(\"redirect_id\");"
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "test",
									"script": {
										"id": "37ae71a0-56f2-44b9-af5c-84815df175f0",
										"exec": [
											"pm.test(\"Status code is 201\", () => {",
											"    pm.response.to.have.status(201);",
											"});",
											"",
											"const jsonData = pm.response.json();",
											"",
											"pm.test(\"Consent status is received\", () => {",
											"    pm.expect(jsonData.consentStatus).to.eql('received');",
											"});",
											"",
											"const scaRedirectLink = jsonData._links.scaRedirect.href;",
											"",
											"pm.test(\"scaRedirect link is present\", () => {",
											"    pm.expect(scaRedirectLink).not.eq(undefined);",
											"});",
											"",
											"if (scaRedirectLink !== undefined) {",
											"    const redirectLinkParts = scaRedirectLink.split('/');",
											"    redirectLinkParts.pop();",
											"    const redirectId = redirectLinkParts.pop();",
											"    pm.globals.set(\"redirect_id\", redirectId);",
											"}"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Accept",
										"value": "*/*",
										"type": "text"
									},
									{
										"key": "Content-Type",
										"value": "application/json",
										"type": "text"
									},
									{
										"key": "date",
										"value": "Sun, 11 Aug 2019 15:02:37 GMT",
										"type": "text"
									},
									{
										"key": "x-request-id",
										"value": "{{x_request_id}}",
										"type": "text"
									},
									{
										"key": "PSU-ID",
										"value": "{{psu_id_none}}",
										"type": "text"
									},
									{
										"key": "psu-ip-address",
										"value": "{{ip_address}}",
										"type": "text"
									},
									{
										"key": "Tpp-Redirect-Uri",
										"value": "some.redirect.uri",
										"type": "text"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n    \"access\": {\n        \"accounts\": [\n            {\n                \"currency\": \"EUR\",\n                \"iban\": \"{{iban_none}}\"\n            }\n        ],\n        \"balances\": [\n            {\n                \"currency\": \"EUR\",\n                \"iban\": \"{{iban_none}}\"\n            }\n        ],\n        \"transactions\": [\n            {\n                \"currency\": \"EUR\",\n                \"iban\": \"{{iban_none}}\"\n            }\n        ]\n    },\n    \"combinedServiceIndicator\": false,\n    \"frequencyPerDay\": 400,\n    \"recurringIndicator\": true,\n    \"validUntil\": \"2021-12-31\"\n}"
								},
								"url": {
									"raw": "{{protocol}}://{{url_xs2a}}/v1/consents",
									"protocol": "{{protocol}}",
									"host": [
										"{{url_xs2a}}"
									],
									"path": [
										"v1",
										"consents"
									]
								},
								"description": "This method create a consent resource, defining access rights to dedicated accounts of a given PSU-ID. These accounts are addressed explicitly in the method as parameters as a core function. Side Effects When this Consent Request is a request where the “recurringIndicator” equals \"true\", and if it exists already a former consent for recurring access on account information for the addressed PSU, then the former consent automatically expires as soon as the new consent request is authorised by the PSU. Optional Extension: As an option, an ASPSP might optionally accept a specific access right on the access on all psd2 related services for all available accounts. As another option an ASPSP might optionally also accept a command, where only access rights are inserted without mentioning the addressed account. The relation to accounts is then handled afterwards between PSU and ASPSP. This option is supported only within the Decoupled, OAuth2 or Re-direct SCA Approach. As a last option, an ASPSP might in addition accept a command with access rights * to see the list of available payment accounts or * to see the list of available payment accounts with balances."
							},
							"response": []
						},
						{
							"name": "3. Get consent response object by redirect id",
							"event": [
								{
									"listen": "test",
									"script": {
										"id": "d5377d12-02f8-436e-919f-71518219b86e",
										"exec": [
											"pm.test(\"Status code is 200\", () => {",
											"    pm.response.to.have.status(200);",
											"});",
											"",
											"const jsonData = pm.response.json();",
											"",
											"const consentId = jsonData.accountConsent.id;",
											"pm.globals.set(\"consent_id\", consentId);"
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "prerequest",
									"script": {
										"id": "65f55601-8411-48a1-908a-475206ccc5bc",
										"exec": [
											"pm.globals.unset(\"consent_id\");"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{protocol}}://{{url_cms}}/psu-api/v1/ais/consent/redirect/{{redirect_id}}",
									"protocol": "{{protocol}}",
									"host": [
										"{{url_cms}}"
									],
									"path": [
										"psu-api",
										"v1",
										"ais",
										"consent",
										"redirect",
										"{{redirect_id}}"
									]
								}
							},
							"response": []
						},
						{
							"name": "4. Export AIS consents by PSU",
							"event": [
								{
									"listen": "test",
									"script": {
										"id": "bd20b694-7979-4a64-8091-1712798cfd1b",
										"exec": [
											"pm.test(\"Status code is 200\", () => {",
											"    pm.response.to.have.status(200);",
											"});",
											"",
											"const jsonData = pm.response.json();",
											"",
											"pm.test(\"Consent is present\", () => {",
											"    const consent = jsonData.find(consent => {",
											"        return consent.id === pm.globals.get(\"consent_id\");",
											"    });",
											"    pm.expect(consent).not.eql(undefined);",
											"});",
											""
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "prerequest",
									"script": {
										"id": "0c26f091-47f3-494c-8017-5ca75382ab89",
										"exec": [
											"",
											"var end = new Date();",
											"",
											"",
											"var dd_end = end.getDate();",
											"var mm_end = end.getMonth()+1; ",
											"var yyyy_end = end.getFullYear();",
											"if(dd_end<10) ",
											"{",
											"    dd_end='0'+dd_end;",
											"} ",
											"",
											"if(mm_end<10) ",
											"{",
											"    mm_end='0'+mm_end;",
											"} ",
											"//==========================",
											"var start = new Date(end-(3600*24*1000));",
											"var dd_start = start.getDate();",
											"var mm_start = start.getMonth()+1; ",
											"var yyyy_start = start.getFullYear();",
											"if(dd_start<10) ",
											"{",
											"    dd_start='0'+dd_start;",
											"} ",
											"",
											"if(mm_start<10) ",
											"{",
											"    mm_start='0'+mm_start;",
											"} ",
											"",
											"var endFormat= yyyy_end+'-'+ mm_end  +'-'+dd_end;",
											"var startFormat= yyyy_start+'-'+ mm_start  +'-'+dd_start;",
											"",
											"",
											"console.log(\"startFormat : \"+ startFormat);",
											"console.log(\"endFormat : \"+ endFormat);",
											"",
											"pm.globals.set(\"startFormat\", startFormat);",
											"pm.globals.set(\"endFormat\", endFormat);",
											"",
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"method": "GET",
								"header": [
									{
										"key": "PSU-ID",
										"value": "{{psu_id_none}}",
										"type": "text"
									},
									{
										"key": "PSU-ID-Type",
										"value": "some type",
										"type": "text",
										"disabled": true
									},
									{
										"key": "PSU-Corporate-ID",
										"value": "",
										"type": "text",
										"disabled": true
									},
									{
										"key": "PSU-Corporate-ID- Type",
										"value": "",
										"type": "text",
										"disabled": true
									},
									{
										"key": "Start-Date",
										"value": "{{startFormat}}",
										"type": "text"
									},
									{
										"key": "End-Date",
										"value": "{{endFormat}}",
										"type": "text"
									},
									{
										"key": "Instance-ID",
										"value": "UNDEFINED",
										"type": "text"
									}
								],
								"url": {
									"raw": "{{protocol}}://{{url_cms}}/aspsp-api/v1/ais/consents/psu",
									"protocol": "{{protocol}}",
									"host": [
										"{{url_cms}}"
									],
									"path": [
										"aspsp-api",
										"v1",
										"ais",
										"consents",
										"psu"
									]
								}
							},
							"response": []
						},
						{
							"name": "5. Export AIS consents by TPP",
							"event": [
								{
									"listen": "test",
									"script": {
										"id": "36ee781f-fc80-43fe-ab24-3599fe300c5c",
										"exec": [
											"pm.test(\"Status code is 200\", () => {",
											"    pm.response.to.have.status(200);",
											"});",
											"",
											"const jsonData = pm.response.json();",
											"",
											"pm.test(\"Consent is present\", () => {",
											"    const consent = jsonData.find(consent => {",
											"        return consent.id === pm.globals.get(\"consent_id\");",
											"    });",
											"    pm.expect(consent).not.eql(undefined);",
											"});"
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "prerequest",
									"script": {
										"id": "f1382666-b1f8-422b-b5c4-1103952ad05c",
										"exec": [
											"",
											"var end = new Date();",
											"",
											"",
											"var dd_end = end.getDate();",
											"var mm_end = end.getMonth()+1; ",
											"var yyyy_end = end.getFullYear();",
											"if(dd_end<10) ",
											"{",
											"    dd_end='0'+dd_end;",
											"} ",
											"",
											"if(mm_end<10) ",
											"{",
											"    mm_end='0'+mm_end;",
											"} ",
											"//==========================",
											"var start = new Date(end-(3600*24*1000));",
											"var dd_start = start.getDate();",
											"var mm_start = start.getMonth()+1; ",
											"var yyyy_start = start.getFullYear();",
											"if(dd_start<10) ",
											"{",
											"    dd_start='0'+dd_start;",
											"} ",
											"",
											"if(mm_start<10) ",
											"{",
											"    mm_start='0'+mm_start;",
											"} ",
											"",
											"var endFormat= yyyy_end+'-'+ mm_end  +'-'+dd_end;",
											"var startFormat= yyyy_start+'-'+ mm_start  +'-'+dd_start;",
											"",
											"",
											"console.log(\"startFormat : \"+ startFormat);",
											"console.log(\"endFormat : \"+ endFormat);",
											"",
											"pm.globals.set(\"startFormat\", startFormat);",
											"pm.globals.set(\"endFormat\", endFormat);",
											"",
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"method": "GET",
								"header": [
									{
										"key": "PSU-ID",
										"value": "{{psu_id_none}}",
										"type": "text"
									},
									{
										"key": "PSU-ID-Type",
										"value": "some type",
										"type": "text",
										"disabled": true
									},
									{
										"key": "PSU-Corporate-ID",
										"value": "",
										"type": "text",
										"disabled": true
									},
									{
										"key": "PSU-Corporate-ID- Type",
										"value": "",
										"type": "text",
										"disabled": true
									},
									{
										"key": "Start-Date",
										"value": "{{startFormat}}",
										"type": "text"
									},
									{
										"key": "End-Date",
										"value": "{{endFormat}}",
										"type": "text"
									},
									{
										"key": "Instance-ID",
										"value": "UNDEFINED",
										"type": "text"
									}
								],
								"url": {
									"raw": "{{protocol}}://{{url_cms}}/aspsp-api/v1/ais/consents/tpp/{{tpp_id}}",
									"protocol": "{{protocol}}",
									"host": [
										"{{url_cms}}"
									],
									"path": [
										"aspsp-api",
										"v1",
										"ais",
										"consents",
										"tpp",
										"{{tpp_id}}"
									]
								}
							},
							"response": []
						},
						{
							"name": "6. Export AIS consents by ASPSP account ID",
							"event": [
								{
									"listen": "test",
									"script": {
										"id": "0ebecc67-9693-44c4-b55d-ce2142ce997f",
										"exec": [
											"pm.test(\"Status code is 200\", () => {",
											"    pm.response.to.have.status(200);",
											"});",
											""
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "prerequest",
									"script": {
										"id": "dd4ec236-01aa-45d5-964d-006afe5270ad",
										"exec": [
											"",
											"var end = new Date();",
											"",
											"",
											"var dd_end = end.getDate();",
											"var mm_end = end.getMonth()+1; ",
											"var yyyy_end = end.getFullYear();",
											"if(dd_end<10) ",
											"{",
											"    dd_end='0'+dd_end;",
											"} ",
											"",
											"if(mm_end<10) ",
											"{",
											"    mm_end='0'+mm_end;",
											"} ",
											"//==========================",
											"var start = new Date(end-(3600*24*1000));",
											"var dd_start = start.getDate();",
											"var mm_start = start.getMonth()+1; ",
											"var yyyy_start = start.getFullYear();",
											"if(dd_start<10) ",
											"{",
											"    dd_start='0'+dd_start;",
											"} ",
											"",
											"if(mm_start<10) ",
											"{",
											"    mm_start='0'+mm_start;",
											"} ",
											"",
											"var endFormat= yyyy_end+'-'+ mm_end  +'-'+dd_end;",
											"var startFormat= yyyy_start+'-'+ mm_start  +'-'+dd_start;",
											"",
											"",
											"console.log(\"startFormat : \"+ startFormat);",
											"console.log(\"endFormat : \"+ endFormat);",
											"",
											"pm.globals.set(\"startFormat\", startFormat);",
											"pm.globals.set(\"endFormat\", endFormat);",
											"",
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"method": "GET",
								"header": [
									{
										"key": "Start-Date",
										"value": "{{startFormat}}",
										"type": "text"
									},
									{
										"key": "End-Date",
										"value": "{{endFormat}}",
										"type": "text"
									},
									{
										"key": "Instance-ID",
										"value": "UNDEFINED",
										"type": "text",
										"disabled": true
									}
								],
								"url": {
									"raw": "{{protocol}}://{{url_cms}}/aspsp-api/v1/ais/consents/account/{{aspsp_account_id}}",
									"protocol": "{{protocol}}",
									"host": [
										"{{url_cms}}"
									],
									"path": [
										"aspsp-api",
										"v1",
										"ais",
										"consents",
										"account",
										"{{aspsp_account_id}}"
									]
								}
							},
							"response": []
						},
						{
							"name": "7. Export AIS consents by PSU for old consents",
							"event": [
								{
									"listen": "test",
									"script": {
										"id": "b131d920-17ba-47cb-b219-a149f60c3043",
										"exec": [
											"pm.test(\"Status code is 200\", () => {",
											"    pm.response.to.have.status(200);",
											"});",
											"",
											"const jsonData = pm.response.json();",
											"",
											"pm.test(\"Consent is present\", () => {",
											"    const consent = jsonData.find(consent => {",
											"        return consent.id === pm.globals.get(\"consent_id\");",
											"    });",
											"    pm.expect(consent).not.eql(undefined);",
											"});",
											""
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "prerequest",
									"script": {
										"id": "ef8ce807-6d1b-4136-8196-c85bffc908b0",
										"exec": [
											"",
											"var end = new Date();",
											"",
											"",
											"var dd_end = end.getDate();",
											"var mm_end = end.getMonth()+1; ",
											"var yyyy_end = end.getFullYear();",
											"if(dd_end<10) ",
											"{",
											"    dd_end='0'+dd_end;",
											"} ",
											"",
											"if(mm_end<10) ",
											"{",
											"    mm_end='0'+mm_end;",
											"} ",
											"//==========================",
											"var start = new Date(end-(3600*24*1000));",
											"var dd_start = start.getDate();",
											"var mm_start = start.getMonth()+1; ",
											"var yyyy_start = start.getFullYear();",
											"if(dd_start<10) ",
											"{",
											"    dd_start='0'+dd_start;",
											"} ",
											"",
											"if(mm_start<10) ",
											"{",
											"    mm_start='0'+mm_start;",
											"} ",
											"",
											"var endFormat= yyyy_end+'-'+ mm_end  +'-'+dd_end;",
											"var startFormat= yyyy_start+'-'+ mm_start  +'-'+dd_start;",
											"",
											"",
											"console.log(\"startFormat : \"+ startFormat);",
											"console.log(\"endFormat : \"+ endFormat);",
											"",
											"pm.globals.set(\"startFormat\", startFormat);",
											"pm.globals.set(\"endFormat\", endFormat);",
											"",
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"method": "GET",
								"header": [
									{
										"key": "PSU-ID",
										"type": "text",
										"value": "{{psu_id_none}}"
									},
									{
										"key": "PSU-ID-Type",
										"type": "text",
										"value": "some type",
										"disabled": true
									},
									{
										"key": "PSU-Corporate-ID",
										"type": "text",
										"value": "",
										"disabled": true
									},
									{
										"key": "PSU-Corporate-ID- Type",
										"type": "text",
										"value": "",
										"disabled": true
									},
									{
										"key": "Start-Date",
										"type": "text",
										"value": "2020-01-01"
									},
									{
										"key": "End-Date",
										"type": "text",
										"value": "{{endFormat}}"
									},
									{
										"key": "Instance-ID",
										"type": "text",
										"value": "UNDEFINED"
									}
								],
								"url": {
									"raw": "{{protocol}}://{{url_cms}}/aspsp-api/v1/ais/consents/psu",
									"protocol": "{{protocol}}",
									"host": [
										"{{url_cms}}"
									],
									"path": [
										"aspsp-api",
										"v1",
										"ais",
										"consents",
										"psu"
									]
								}
							},
							"response": []
						}
					],
					"protocolProfileBehavior": {},
					"_postman_isSubFolder": true
				},
				{
					"name": "PIS",
					"item": [
						{
							"name": "1. Set redirect SCA approach",
							"event": [
								{
									"listen": "test",
									"script": {
										"id": "00db07ce-5be3-4819-8c92-861decc270f5",
										"exec": [
											"pm.test(\"Status code is 200\", () => {",
											"    pm.response.to.have.status(200);",
											"});",
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"method": "PUT",
								"header": [
									{
										"key": "Content-Type",
										"name": "Content-Type",
										"value": "application/json",
										"type": "text"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "[\n  \"REDIRECT\",\n  \"EMBEDDED\",\n  \"DECOUPLED\"\n]"
								},
								"url": {
									"raw": "{{protocol}}://{{url_aspsp_profile}}/api/v1/aspsp-profile/for-debug/sca-approaches",
									"protocol": "{{protocol}}",
									"host": [
										"{{url_aspsp_profile}}"
									],
									"path": [
										"api",
										"v1",
										"aspsp-profile",
										"for-debug",
										"sca-approaches"
									]
								}
							},
							"response": []
						},
						{
							"name": "1. Initiate payment",
							"event": [
								{
									"listen": "test",
									"script": {
										"id": "9a935521-59b7-46d4-a059-a91dbdca98f9",
										"exec": [
											"pm.test(\"Status code is 201\", () => {",
											"    pm.response.to.have.status(201);",
											"});",
											"",
											"const jsonData = pm.response.json();",
											"",
											"pm.test(\"Transaction status is RCVD\", () => {",
											"    pm.expect(jsonData.transactionStatus).to.eql('RCVD');",
											"});",
											"",
											"const scaRedirectLink = jsonData._links.scaRedirect.href;",
											"",
											"pm.test(\"scaRedirect link is present\", () => {",
											"    pm.expect(scaRedirectLink).not.eq(undefined);",
											"});",
											"",
											"if (scaRedirectLink !== undefined) {",
											"    const redirectLinkParts = scaRedirectLink.split('/');",
											"    redirectLinkParts.pop();",
											"    const redirectId = redirectLinkParts.pop();",
											"    pm.globals.set(\"redirect_id\", redirectId);",
											"}"
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "prerequest",
									"script": {
										"id": "6975ff9c-eb34-4b04-8c60-7f75f02fe835",
										"exec": [
											"pm.globals.unset(\"redirect_id\");"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Accept",
										"value": "application/json"
									},
									{
										"key": "Content-Type",
										"name": "Content-Type",
										"type": "text",
										"value": "application/json"
									},
									{
										"key": "PSU-IP-Address",
										"value": "{{ip_address}}"
									},
									{
										"key": "X-Request-ID",
										"value": "{{x_request_id}}"
									},
									{
										"key": "PSU-ID",
										"type": "text",
										"value": "{{psu_id_none}}"
									},
									{
										"key": "Tpp-Redirect-Uri",
										"value": "some.redirect.uri",
										"type": "text"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n\"endToEndIdentification\": \"RI-1234567890\",\n\"debtorAccount\": {\n  \"currency\": \"EUR\",\n  \"iban\": \"{{iban_none}}\"\n },\n\"instructedAmount\": {\n  \"amount\": 1000,\n  \"currency\": \"EUR\"\n },\n\"creditorAccount\": {\n  \"currency\": \"EUR\",\n  \"iban\": \"{{iban_none}}\"\n },\n\"creditorAgent\": \"AAAADEBBXXX\",\n\"creditorName\": \"Telekom\",\n \"creditorAddress\": {\n  \"buildingNumber\": \"123-34\",\n  \"townName\": \"Nürnberg\",\n  \"country\": \"DE\",\n  \"postCode\": 90431,\n  \"streetName\": \"Herrnstraße\"\n },\n \"remittanceInformationUnstructured\": \"Ref. Number TELEKOM-1222\"\n }"
								},
								"url": {
									"raw": "{{protocol}}://{{url_xs2a}}/v1/{{payment_service}}/{{payment_product}}",
									"protocol": "{{protocol}}",
									"host": [
										"{{url_xs2a}}"
									],
									"path": [
										"v1",
										"{{payment_service}}",
										"{{payment_product}}"
									]
								},
								"description": "This method is used to initiate a payment at the ASPSP.  ## Variants of Payment Initiation Requests  This method to initiate a payment initiation at the ASPSP can be sent with either a JSON body or an pain.001 body depending on the payment product in the path.  There are the following **payment products**:    - Payment products with payment information in *JSON* format:     - ***sepa-credit-transfers***     - ***instant-sepa-credit-transfers***     - ***target-2-payments***     - ***cross-border-credit-transfers***   - Payment products with payment information in *pain.001* XML format:     - ***pain.001-sepa-credit-transfers***     - ***pain.001-instant-sepa-credit-transfers***     - ***pain.001-target-2-payments***     - ***pain.001-cross-border-credit-transfers***  Furthermore the request body depends on the **payment-service**   * ***payments***: A single payment initiation request.   * ***bulk-payments***: A collection of several payment iniatiation requests.        In case of a *pain.001* message there are more than one payments contained in the *pain.001 message.          In case of a *JSON* there are several JSON payment blocks contained in a joining list.   * ***periodic-payments***:      Create a standing order initiation resource for recurrent i.e. periodic payments addressable under {paymentId}       with all data relevant for the corresponding payment product and the execution of the standing order contained in a JSON body.   This is the first step in the API to initiate the related recurring/periodic payment.    ## Single and mulitilevel SCA Processes  The Payment Initiation Requests are independent from the need of one ore multilevel  SCA processing, i.e. independent from the number of authorisations needed for the execution of payments.   But the response messages are specific to either one SCA processing or multilevel SCA processing.   For payment initiation with multilevel SCA, this specification requires an explicit start of the authorisation,  i.e. links directly associated with SCA processing like 'scaRedirect' or 'scaOAuth' cannot be contained in the  response message of a Payment Initation Request for a payment, where multiple authorisations are needed.  Also if any data is needed for the next action, like selecting an SCA method is not supported in the response,  since all starts of the multiple authorisations are fully equal.  In these cases, first an authorisation sub-resource has to be generated following the 'startAuthorisation' link. "
							},
							"response": []
						},
						{
							"name": "2. Get payment response object by redirect id",
							"event": [
								{
									"listen": "test",
									"script": {
										"id": "ab51f3dc-f866-4d13-8bc2-6e9dfd81dad1",
										"exec": [
											"pm.test(\"Status code is 200\", () => {",
											"    pm.response.to.have.status(200);",
											"});",
											"",
											"const jsonData = pm.response.json();",
											"",
											"const paymentId = jsonData.payment.paymentId;",
											"pm.globals.set(\"payment_id\", paymentId);"
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "prerequest",
									"script": {
										"id": "f16b8bb1-a104-47fd-ae9c-c43747603940",
										"exec": [
											"pm.globals.unset(\"payment_id\");"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{protocol}}://{{url_cms}}/psu-api/v1/payment/redirect/{{redirect_id}}",
									"protocol": "{{protocol}}",
									"host": [
										"{{url_cms}}"
									],
									"path": [
										"psu-api",
										"v1",
										"payment",
										"redirect",
										"{{redirect_id}}"
									]
								}
							},
							"response": []
						},
						{
							"name": "3. Export payments by PSU",
							"event": [
								{
									"listen": "test",
									"script": {
										"id": "da68b332-34fd-4e24-b5b3-15f47825e663",
										"exec": [
											"pm.test(\"Status code is 200\", () => {",
											"    pm.response.to.have.status(200);",
											"});",
											"",
											"const jsonData = pm.response.json();",
											"",
											"pm.test(\"Payment is present\", () => {",
											"    const payment = jsonData.find(payment => {",
											"        return payment.paymentId === pm.globals.get(\"payment_id\"); ",
											"    });",
											"    pm.expect(payment).not.eql(undefined);",
											"});"
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "prerequest",
									"script": {
										"id": "e5efb588-1360-44e5-9839-040c3dd5b695",
										"exec": [
											"",
											"var end = new Date();",
											"",
											"",
											"var dd_end = end.getDate();",
											"var mm_end = end.getMonth()+1; ",
											"var yyyy_end = end.getFullYear();",
											"if(dd_end<10) ",
											"{",
											"    dd_end='0'+dd_end;",
											"} ",
											"",
											"if(mm_end<10) ",
											"{",
											"    mm_end='0'+mm_end;",
											"} ",
											"//==========================",
											"var start = new Date(end-(3600*24*1000));",
											"var dd_start = start.getDate();",
											"var mm_start = start.getMonth()+1; ",
											"var yyyy_start = start.getFullYear();",
											"if(dd_start<10) ",
											"{",
											"    dd_start='0'+dd_start;",
											"} ",
											"",
											"if(mm_start<10) ",
											"{",
											"    mm_start='0'+mm_start;",
											"} ",
											"",
											"var endFormat= yyyy_end+'-'+ mm_end  +'-'+dd_end;",
											"var startFormat= yyyy_start+'-'+ mm_start  +'-'+dd_start;",
											"",
											"",
											"console.log(\"startFormat : \"+ startFormat);",
											"console.log(\"endFormat : \"+ endFormat);",
											"",
											"pm.globals.set(\"startFormat\", startFormat);",
											"pm.globals.set(\"endFormat\", endFormat);",
											"",
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"method": "GET",
								"header": [
									{
										"key": "PSU-ID",
										"value": "{{psu_id_none}}",
										"type": "text"
									},
									{
										"key": "PSU-ID-Type",
										"value": "some type",
										"type": "text",
										"disabled": true
									},
									{
										"key": "PSU-Corporate-ID",
										"value": "",
										"type": "text",
										"disabled": true
									},
									{
										"key": "PSU-Corporate-ID- Type",
										"value": "",
										"type": "text",
										"disabled": true
									},
									{
										"key": "Start-Date",
										"value": "{{startFormat}}",
										"type": "text"
									},
									{
										"key": "End-Date",
										"value": "{{endFormat}}",
										"type": "text"
									},
									{
										"key": "Instance-ID",
										"value": "UNDEFINED",
										"type": "text"
									}
								],
								"url": {
									"raw": "{{protocol}}://{{url_cms}}/aspsp-api/v1/pis/payments/psu",
									"protocol": "{{protocol}}",
									"host": [
										"{{url_cms}}"
									],
									"path": [
										"aspsp-api",
										"v1",
										"pis",
										"payments",
										"psu"
									]
								}
							},
							"response": []
						},
						{
							"name": "4. Export payments by TPP",
							"event": [
								{
									"listen": "test",
									"script": {
										"id": "daedb0ff-766a-40bc-aa53-08d4ecb99485",
										"exec": [
											"pm.test(\"Status code is 200\", () => {",
											"    pm.response.to.have.status(200);",
											"});",
											"",
											"const jsonData = pm.response.json();",
											"",
											"pm.test(\"Payment is present\", () => {",
											"    const payment = jsonData.find(payment => {",
											"        return payment.paymentId === pm.globals.get(\"payment_id\"); ",
											"    });",
											"    pm.expect(payment).not.eql(undefined);",
											"});"
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "prerequest",
									"script": {
										"id": "deb56c38-b7f9-4239-9338-b46b92fe3f88",
										"exec": [
											"",
											"var end = new Date();",
											"",
											"",
											"var dd_end = end.getDate();",
											"var mm_end = end.getMonth()+1; ",
											"var yyyy_end = end.getFullYear();",
											"if(dd_end<10) ",
											"{",
											"    dd_end='0'+dd_end;",
											"} ",
											"",
											"if(mm_end<10) ",
											"{",
											"    mm_end='0'+mm_end;",
											"} ",
											"//==========================",
											"var start = new Date(end-(3600*24*1000));",
											"var dd_start = start.getDate();",
											"var mm_start = start.getMonth()+1; ",
											"var yyyy_start = start.getFullYear();",
											"if(dd_start<10) ",
											"{",
											"    dd_start='0'+dd_start;",
											"} ",
											"",
											"if(mm_start<10) ",
											"{",
											"    mm_start='0'+mm_start;",
											"} ",
											"",
											"var endFormat= yyyy_end+'-'+ mm_end  +'-'+dd_end;",
											"var startFormat= yyyy_start+'-'+ mm_start  +'-'+dd_start;",
											"",
											"",
											"console.log(\"startFormat : \"+ startFormat);",
											"console.log(\"endFormat : \"+ endFormat);",
											"",
											"pm.globals.set(\"startFormat\", startFormat);",
											"pm.globals.set(\"endFormat\", endFormat);",
											"",
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"method": "GET",
								"header": [
									{
										"key": "PSU-ID",
										"value": "{{psu_id_none}}",
										"type": "text"
									},
									{
										"key": "PSU-ID-Type",
										"value": "some type",
										"type": "text",
										"disabled": true
									},
									{
										"key": "PSU-Corporate-ID",
										"value": "",
										"type": "text",
										"disabled": true
									},
									{
										"key": "PSU-Corporate-ID- Type",
										"value": "",
										"type": "text",
										"disabled": true
									},
									{
										"key": "Start-Date",
										"value": "{{startFormat}}",
										"type": "text"
									},
									{
										"key": "End-Date",
										"value": "{{endFormat}}",
										"type": "text"
									},
									{
										"key": "Instance-ID",
										"value": "UNDEFINED",
										"type": "text"
									}
								],
								"url": {
									"raw": "{{protocol}}://{{url_cms}}/aspsp-api/v1/pis/payments/tpp/{{tpp_id}}",
									"protocol": "{{protocol}}",
									"host": [
										"{{url_cms}}"
									],
									"path": [
										"aspsp-api",
										"v1",
										"pis",
										"payments",
										"tpp",
										"{{tpp_id}}"
									]
								}
							},
							"response": []
						},
						{
							"name": "5. Export payments by ASPSP account ID",
							"event": [
								{
									"listen": "test",
									"script": {
										"id": "72341798-c2bb-4b32-a561-1ea436783884",
										"exec": [
											"pm.test(\"Status code is 200\", () => {",
											"    pm.response.to.have.status(200);",
											"});"
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "prerequest",
									"script": {
										"id": "32d6421a-f97b-4499-a822-aa3208d4b31d",
										"exec": [
											"",
											"var end = new Date();",
											"",
											"",
											"var dd_end = end.getDate();",
											"var mm_end = end.getMonth()+1; ",
											"var yyyy_end = end.getFullYear();",
											"if(dd_end<10) ",
											"{",
											"    dd_end='0'+dd_end;",
											"} ",
											"",
											"if(mm_end<10) ",
											"{",
											"    mm_end='0'+mm_end;",
											"} ",
											"//==========================",
											"var start = new Date(end-(3600*24*1000));",
											"var dd_start = start.getDate();",
											"var mm_start = start.getMonth()+1; ",
											"var yyyy_start = start.getFullYear();",
											"if(dd_start<10) ",
											"{",
											"    dd_start='0'+dd_start;",
											"} ",
											"",
											"if(mm_start<10) ",
											"{",
											"    mm_start='0'+mm_start;",
											"} ",
											"",
											"var endFormat= yyyy_end+'-'+ mm_end  +'-'+dd_end;",
											"var startFormat= yyyy_start+'-'+ mm_start  +'-'+dd_start;",
											"",
											"",
											"console.log(\"startFormat : \"+ startFormat);",
											"console.log(\"endFormat : \"+ endFormat);",
											"",
											"pm.globals.set(\"startFormat\", startFormat);",
											"pm.globals.set(\"endFormat\", endFormat);",
											"",
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"method": "GET",
								"header": [
									{
										"key": "Start-Date",
										"value": "{{startFormat}}",
										"type": "text"
									},
									{
										"key": "End-Date",
										"value": "{{endFormat}}",
										"type": "text"
									},
									{
										"key": "Instance-ID",
										"value": "UNDEFINED",
										"type": "text"
									}
								],
								"url": {
									"raw": "{{protocol}}://{{url_cms}}/aspsp-api/v1/pis/payments/account/{{aspsp_account_id}}",
									"protocol": "{{protocol}}",
									"host": [
										"{{url_cms}}"
									],
									"path": [
										"aspsp-api",
										"v1",
										"pis",
										"payments",
										"account",
										"{{aspsp_account_id}}"
									]
								}
							},
							"response": []
						}
					],
					"protocolProfileBehavior": {},
					"_postman_isSubFolder": true
				},
				{
					"name": "PIIS",
					"item": [
						{
							"name": "1. Create PIIS consent",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"id": "0c816c5d-2783-4957-8950-23fa049bff1b",
										"exec": [
											"pm.globals.unset(\"consent_id\");"
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "test",
									"script": {
										"id": "b49e1e22-97e3-4076-8c9b-b1281ce485da",
										"exec": [
											"pm.test(\"Status code is 201\", () => {",
											"    pm.response.to.have.status(201);",
											"});",
											"",
											"const jsonData = pm.response.json();",
											"",
											"const consentId = jsonData.consentId;",
											"pm.globals.set(\"consent_id\", consentId);"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"name": "Content-Type",
										"type": "text",
										"value": "application/json"
									},
									{
										"key": "PSU-ID",
										"type": "text",
										"value": "{{psu_id_none}}"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"account\": \n    {\n      \"currency\": \"EUR\",\n      \"iban\": \"LU280019400644750000\",\n      \"aspspAccountId\": \"{{aspsp_account_id}}\"\n    },\n  \"tppAuthorisationNumber\": \"{{tpp_id}}\",\n  \"validUntil\": \"2021-10-10\"\n}"
								},
								"url": {
									"raw": "{{protocol}}://{{url_cms}}/aspsp-api/v1/piis/consents/",
									"protocol": "{{protocol}}",
									"host": [
										"{{url_cms}}"
									],
									"path": [
										"aspsp-api",
										"v1",
										"piis",
										"consents",
										""
									]
								}
							},
							"response": []
						},
						{
							"name": "2. Export PIIS consents by PSU",
							"event": [
								{
									"listen": "test",
									"script": {
										"id": "b3dec397-ce48-4dcd-98b5-a7bc7d4cb879",
										"exec": [
											"pm.test(\"Status code is 200\", () => {",
											"    pm.response.to.have.status(200);",
											"});",
											"",
											"const jsonData = pm.response.json();",
											"",
											"pm.test(\"Consent is present\", () => {",
											"    const consent = jsonData.find(consent => {",
											"        return consent.id === pm.globals.get(\"consent_id\"); ",
											"    });",
											"    pm.expect(consent).not.eql(undefined);",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"method": "GET",
								"header": [
									{
										"key": "PSU-ID",
										"value": "{{psu_id_none}}",
										"type": "text"
									},
									{
										"key": "PSU-ID-Type",
										"value": "some type",
										"type": "text",
										"disabled": true
									},
									{
										"key": "PSU-Corporate-ID",
										"value": "",
										"type": "text",
										"disabled": true
									},
									{
										"key": "PSU-Corporate-ID- Type",
										"value": "",
										"type": "text",
										"disabled": true
									},
									{
										"key": "Start-Date",
										"value": "2019-01-01",
										"type": "text",
										"disabled": true
									},
									{
										"key": "End-Date",
										"value": "2019-01-16",
										"type": "text",
										"disabled": true
									},
									{
										"key": "Instance-ID",
										"value": "UNDEFINED",
										"type": "text",
										"disabled": true
									}
								],
								"url": {
									"raw": "{{protocol}}://{{url_cms}}/aspsp-api/v1/piis/consents/psu",
									"protocol": "{{protocol}}",
									"host": [
										"{{url_cms}}"
									],
									"path": [
										"aspsp-api",
										"v1",
										"piis",
										"consents",
										"psu"
									]
								}
							},
							"response": []
						},
						{
							"name": "2. Export PIIS consents by TPP",
							"event": [
								{
									"listen": "test",
									"script": {
										"id": "545ad043-7504-49d9-a605-8657553a7fa8",
										"exec": [
											"pm.test(\"Status code is 200\", () => {",
											"    pm.response.to.have.status(200);",
											"});",
											"",
											"const jsonData = pm.response.json();",
											"",
											"pm.test(\"Consent is present\", () => {",
											"    const consent = jsonData.find(consent => {",
											"        return consent.id === pm.globals.get(\"consent_id\"); ",
											"    });",
											"    pm.expect(consent).not.eql(undefined);",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"method": "GET",
								"header": [
									{
										"key": "PSU-ID",
										"type": "text",
										"value": "{{psu_id_none}}",
										"disabled": true
									},
									{
										"key": "PSU-ID-Type",
										"type": "text",
										"value": "some type",
										"disabled": true
									},
									{
										"key": "PSU-Corporate-ID",
										"type": "text",
										"value": "",
										"disabled": true
									},
									{
										"key": "PSU-Corporate-ID- Type",
										"type": "text",
										"value": "",
										"disabled": true
									},
									{
										"key": "Start-Date",
										"type": "text",
										"value": "2019-01-01",
										"disabled": true
									},
									{
										"key": "End-Date",
										"type": "text",
										"value": "2019-01-16",
										"disabled": true
									},
									{
										"key": "Instance-ID",
										"type": "text",
										"value": "UNDEFINED",
										"disabled": true
									}
								],
								"url": {
									"raw": "{{protocol}}://{{url_cms}}/aspsp-api/v1/piis/consents/tpp/{{tpp_id}}",
									"protocol": "{{protocol}}",
									"host": [
										"{{url_cms}}"
									],
									"path": [
										"aspsp-api",
										"v1",
										"piis",
										"consents",
										"tpp",
										"{{tpp_id}}"
									]
								}
							},
							"response": []
						},
						{
							"name": "2. Export PIIS consents by ASPSP account id",
							"event": [
								{
									"listen": "test",
									"script": {
										"id": "a453f4a9-cba3-42e8-9593-1182c19d61fa",
										"exec": [
											"pm.test(\"Status code is 200\", () => {",
											"    pm.response.to.have.status(200);",
											"});",
											""
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "prerequest",
									"script": {
										"id": "60fe272a-de65-4a01-b4c3-a3d8f8b6d289",
										"exec": [
											"",
											"var end = new Date();",
											"",
											"",
											"var dd_end = end.getDate();",
											"var mm_end = end.getMonth()+1; ",
											"var yyyy_end = end.getFullYear();",
											"if(dd_end<10) ",
											"{",
											"    dd_end='0'+dd_end;",
											"} ",
											"",
											"if(mm_end<10) ",
											"{",
											"    mm_end='0'+mm_end;",
											"} ",
											"//==========================",
											"var start = new Date(end-(3600*24*1000));",
											"var dd_start = start.getDate();",
											"var mm_start = start.getMonth()+1; ",
											"var yyyy_start = start.getFullYear();",
											"if(dd_start<10) ",
											"{",
											"    dd_start='0'+dd_start;",
											"} ",
											"",
											"if(mm_start<10) ",
											"{",
											"    mm_start='0'+mm_start;",
											"} ",
											"",
											"var endFormat= yyyy_end+'-'+ mm_end  +'-'+dd_end;",
											"var startFormat= yyyy_start+'-'+ mm_start  +'-'+dd_start;",
											"",
											"",
											"console.log(\"startFormat : \"+ startFormat);",
											"console.log(\"endFormat : \"+ endFormat);",
											"",
											"pm.globals.set(\"startFormat\", startFormat);",
											"pm.globals.set(\"endFormat\", endFormat);",
											"",
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"method": "GET",
								"header": [
									{
										"key": "Start-Date",
										"value": "{{startFormat}}",
										"type": "text"
									},
									{
										"key": "End-Date",
										"value": "{{endFormat}}",
										"type": "text"
									},
									{
										"key": "Instance-ID",
										"value": "UNDEFINED",
										"type": "text"
									}
								],
								"url": {
									"raw": "{{protocol}}://{{url_cms}}/aspsp-api/v1/piis/consents/account/{{aspsp_account_id}}",
									"protocol": "{{protocol}}",
									"host": [
										"{{url_cms}}"
									],
									"path": [
										"aspsp-api",
										"v1",
										"piis",
										"consents",
										"account",
										"{{aspsp_account_id}}"
									]
								}
							},
							"response": []
						}
					],
					"protocolProfileBehavior": {},
					"_postman_isSubFolder": true
				}
			],
			"protocolProfileBehavior": {}
		},
		{
			"name": "PIIS Consents",
			"item": [
				{
					"name": "Implicit revocation",
					"item": [
						{
							"name": "1. Create PIIS consent",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"id": "b6772a58-e8ac-4387-9b01-20dce5a25694",
										"exec": [
											"pm.globals.unset(\"consent_id\");"
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "test",
									"script": {
										"id": "b68db2d3-6478-4d28-af68-1178c97a406c",
										"exec": [
											"pm.test(\"Status code is 201\", () => {",
											"    pm.response.to.have.status(201);",
											"});",
											"",
											"const jsonData = pm.response.json();",
											"const consentId = jsonData.consentId;",
											"",
											"pm.test(\"Consent ID is present\", () => {",
											"    pm.expect(consentId).not.eql(undefined);",
											"});",
											"",
											"pm.globals.set(\"consent_id\", consentId);"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"name": "Content-Type",
										"type": "text",
										"value": "application/json"
									},
									{
										"key": "PSU-ID",
										"type": "text",
										"value": "{{psu_id_none}}"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n    \"account\": {\n        \"currency\": \"EUR\",\n        \"iban\": \"{{iban_none}}\",\n        \"aspspAccountId\": \"{{aspsp_account_id}}\"\n    },\n    \"tppAuthorisationNumber\": \"{{tpp_id}}\",\n    \"validUntil\": \"2021-10-10\"\n}"
								},
								"url": {
									"raw": "{{protocol}}://{{url_cms}}/aspsp-api/v1/piis/consents/",
									"protocol": "{{protocol}}",
									"host": [
										"{{url_cms}}"
									],
									"path": [
										"aspsp-api",
										"v1",
										"piis",
										"consents",
										""
									]
								}
							},
							"response": []
						},
						{
							"name": "3. Get PIIS consent by ID",
							"event": [
								{
									"listen": "test",
									"script": {
										"id": "db818767-7faa-49f1-b928-91f7a3f00b1e",
										"exec": [
											"pm.test(\"Status code is 200\", () => {",
											"    pm.response.to.have.status(200);",
											"});",
											"",
											"const jsonData = pm.response.json();",
											"const consentStatus = jsonData.consentStatus;",
											"",
											"pm.test(\"Consent status is VALID\", () => {",
											"    pm.expect(consentStatus).to.eql(\"VALID\");",
											"});",
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"method": "GET",
								"header": [
									{
										"key": "PSU-ID",
										"value": "{{psu_id_none}}",
										"type": "text"
									}
								],
								"url": {
									"raw": "{{protocol}}://{{url_cms}}/psu-api/v1/piis/consents/{{consent_id}}",
									"protocol": "{{protocol}}",
									"host": [
										"{{url_cms}}"
									],
									"path": [
										"psu-api",
										"v1",
										"piis",
										"consents",
										"{{consent_id}}"
									]
								}
							},
							"response": []
						},
						{
							"name": "4. Create another PIIS consent with same PSU and TPP",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"id": "6d742aaa-a9c2-47b4-afb0-b62b57c602ce",
										"exec": [
											""
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "test",
									"script": {
										"id": "bdfdbc4e-9dd0-43a1-95e1-fe387bc9f6e0",
										"exec": [
											"pm.test(\"Status code is 201\", () => {",
											"    pm.response.to.have.status(201);",
											"});",
											"",
											"const jsonData = pm.response.json();",
											"const consentId = jsonData.consentId;",
											"",
											"pm.test(\"Consent ID is present\", () => {",
											"    pm.expect(consentId).not.eql(undefined);",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"name": "Content-Type",
										"type": "text",
										"value": "application/json"
									},
									{
										"key": "PSU-ID",
										"type": "text",
										"value": "{{psu_id_none}}"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n    \"account\": {\n        \"currency\": \"EUR\",\n        \"iban\": \"{{iban_none}}\",\n        \"aspspAccountId\": \"{{aspsp_account_id}}\"\n    },\n    \"tppAuthorisationNumber\": \"{{tpp_id}}\",\n    \"validUntil\": \"2021-10-10\"\n}"
								},
								"url": {
									"raw": "{{protocol}}://{{url_cms}}/aspsp-api/v1/piis/consents/",
									"protocol": "{{protocol}}",
									"host": [
										"{{url_cms}}"
									],
									"path": [
										"aspsp-api",
										"v1",
										"piis",
										"consents",
										""
									]
								}
							},
							"response": []
						},
						{
							"name": "5. Get first PIIS consent by ID",
							"event": [
								{
									"listen": "test",
									"script": {
										"id": "6f02a6ad-81a1-4425-a276-046d29548e27",
										"exec": [
											"pm.test(\"Status code is 200\", () => {",
											"    pm.response.to.have.status(200);",
											"});",
											"",
											"const jsonData = pm.response.json();",
											"const consentStatus = jsonData.consentStatus;",
											"",
											"pm.test(\"Consent status is REVOKED_BY_PSU\", () => {",
											"    pm.expect(consentStatus).to.eql(\"REVOKED_BY_PSU\");",
											"});",
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"method": "GET",
								"header": [
									{
										"key": "PSU-ID",
										"value": "{{psu_id_none}}",
										"type": "text"
									}
								],
								"url": {
									"raw": "{{protocol}}://{{url_cms}}/psu-api/v1/piis/consents/{{consent_id}}",
									"protocol": "{{protocol}}",
									"host": [
										"{{url_cms}}"
									],
									"path": [
										"psu-api",
										"v1",
										"piis",
										"consents",
										"{{consent_id}}"
									]
								}
							},
							"response": []
						}
					],
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"id": "e831b79b-a661-4803-9f9e-49eed51ff9b7",
								"type": "text/javascript",
								"exec": [
									""
								]
							}
						},
						{
							"listen": "test",
							"script": {
								"id": "b94da315-5398-44fd-883b-1de056948f31",
								"type": "text/javascript",
								"exec": [
									""
								]
							}
						}
					],
					"protocolProfileBehavior": {},
					"_postman_isSubFolder": true
				},
				{
					"name": "Implicit revocation for terminated consent",
					"item": [
						{
							"name": "1. Create PIIS consent",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"id": "2881e9bf-6dd0-4288-a762-1503f651969f",
										"exec": [
											"pm.globals.unset(\"consent_id\");"
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "test",
									"script": {
										"id": "9cc4a29e-ce31-49d3-a49f-4734d0ea126d",
										"exec": [
											"pm.test(\"Status code is 201\", () => {",
											"    pm.response.to.have.status(201);",
											"});",
											"",
											"const jsonData = pm.response.json();",
											"const consentId = jsonData.consentId;",
											"",
											"pm.test(\"Consent ID is present\", () => {",
											"    pm.expect(consentId).not.eql(undefined);",
											"});",
											"",
											"pm.globals.set(\"consent_id\", consentId);"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"name": "Content-Type",
										"type": "text",
										"value": "application/json"
									},
									{
										"key": "PSU-ID",
										"type": "text",
										"value": "{{psu_id_none}}"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n    \"account\": {\n        \"currency\": \"EUR\",\n        \"iban\": \"{{iban_none}}\",\n        \"aspspAccountId\": \"{{aspsp_account_id}}\"\n    },\n    \"tppAuthorisationNumber\": \"{{tpp_id}}\",\n    \"validUntil\": \"2021-10-10\"\n}"
								},
								"url": {
									"raw": "{{protocol}}://{{url_cms}}/aspsp-api/v1/piis/consents/",
									"protocol": "{{protocol}}",
									"host": [
										"{{url_cms}}"
									],
									"path": [
										"aspsp-api",
										"v1",
										"piis",
										"consents",
										""
									]
								}
							},
							"response": []
						},
						{
							"name": "2. Terminate PIIS consent by ID",
							"event": [
								{
									"listen": "test",
									"script": {
										"id": "180f84e6-287d-4718-8afb-59a783a14066",
										"exec": [
											"pm.test(\"Status code is 200\", () => {",
											"    pm.response.to.have.status(200);",
											"});",
											"",
											"const jsonData = pm.response.json();",
											"",
											"pm.test(\"Response body is true\", () => {",
											"    pm.expect(jsonData).to.eql(true);",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "noauth"
								},
								"method": "DELETE",
								"header": [
									{
										"description": "ID of the particular service instance",
										"key": "instance-id",
										"value": "UNDEFINED"
									}
								],
								"url": {
									"raw": "{{protocol}}://{{url_cms}}/aspsp-api/v1/piis/consents/{{consent_id}}",
									"protocol": "{{protocol}}",
									"host": [
										"{{url_cms}}"
									],
									"path": [
										"aspsp-api",
										"v1",
										"piis",
										"consents",
										"{{consent_id}}"
									]
								}
							},
							"response": [
								{
									"name": "No Content",
									"originalRequest": {
										"method": "DELETE",
										"header": [
											{
												"description": {
													"content": "ID of the particular service instance",
													"type": "text/plain"
												},
												"key": "instance-id",
												"value": "UNDEFINED"
											}
										],
										"url": {
											"raw": "{{baseUrl}}/aspsp-api/v1/piis/consents/<string>",
											"host": [
												"{{baseUrl}}"
											],
											"path": [
												"aspsp-api",
												"v1",
												"piis",
												"consents",
												"<string>"
											]
										}
									},
									"status": "No Content",
									"code": 204,
									"_postman_previewlanguage": "text",
									"header": [
										{
											"key": "Content-Type",
											"value": "text/plain"
										}
									],
									"cookie": [],
									"body": ""
								},
								{
									"name": "Not Found",
									"originalRequest": {
										"method": "DELETE",
										"header": [
											{
												"description": {
													"content": "ID of the particular service instance",
													"type": "text/plain"
												},
												"key": "instance-id",
												"value": "UNDEFINED"
											}
										],
										"url": {
											"raw": "{{baseUrl}}/aspsp-api/v1/piis/consents/<string>",
											"host": [
												"{{baseUrl}}"
											],
											"path": [
												"aspsp-api",
												"v1",
												"piis",
												"consents",
												"<string>"
											]
										}
									},
									"status": "Not Found",
									"code": 404,
									"_postman_previewlanguage": "text",
									"header": [
										{
											"key": "Content-Type",
											"value": "text/plain"
										}
									],
									"cookie": [],
									"body": ""
								},
								{
									"name": "OK",
									"originalRequest": {
										"method": "DELETE",
										"header": [
											{
												"description": {
													"content": "ID of the particular service instance",
													"type": "text/plain"
												},
												"key": "instance-id",
												"value": "UNDEFINED"
											}
										],
										"url": {
											"raw": "{{baseUrl}}/aspsp-api/v1/piis/consents/<string>",
											"host": [
												"{{baseUrl}}"
											],
											"path": [
												"aspsp-api",
												"v1",
												"piis",
												"consents",
												"<string>"
											]
										}
									},
									"status": "OK",
									"code": 200,
									"_postman_previewlanguage": "text",
									"header": [
										{
											"key": "Content-Type",
											"value": "*/*"
										}
									],
									"cookie": [],
									"body": "<boolean>"
								},
								{
									"name": "Unauthorized",
									"originalRequest": {
										"method": "DELETE",
										"header": [
											{
												"description": {
													"content": "ID of the particular service instance",
													"type": "text/plain"
												},
												"key": "instance-id",
												"value": "UNDEFINED"
											}
										],
										"url": {
											"raw": "{{baseUrl}}/aspsp-api/v1/piis/consents/<string>",
											"host": [
												"{{baseUrl}}"
											],
											"path": [
												"aspsp-api",
												"v1",
												"piis",
												"consents",
												"<string>"
											]
										}
									},
									"status": "Unauthorized",
									"code": 401,
									"_postman_previewlanguage": "text",
									"header": [
										{
											"key": "Content-Type",
											"value": "text/plain"
										}
									],
									"cookie": [],
									"body": ""
								},
								{
									"name": "Forbidden",
									"originalRequest": {
										"method": "DELETE",
										"header": [
											{
												"description": {
													"content": "ID of the particular service instance",
													"type": "text/plain"
												},
												"key": "instance-id",
												"value": "UNDEFINED"
											}
										],
										"url": {
											"raw": "{{baseUrl}}/aspsp-api/v1/piis/consents/<string>",
											"host": [
												"{{baseUrl}}"
											],
											"path": [
												"aspsp-api",
												"v1",
												"piis",
												"consents",
												"<string>"
											]
										}
									},
									"status": "Forbidden",
									"code": 403,
									"_postman_previewlanguage": "text",
									"header": [
										{
											"key": "Content-Type",
											"value": "text/plain"
										}
									],
									"cookie": [],
									"body": ""
								}
							]
						},
						{
							"name": "3. Get PIIS consent by ID",
							"event": [
								{
									"listen": "test",
									"script": {
										"id": "3d8b3ddc-6e0a-43ca-8fc1-37cf2614c70b",
										"exec": [
											"pm.test(\"Status code is 200\", () => {",
											"    pm.response.to.have.status(200);",
											"});",
											"",
											"const jsonData = pm.response.json();",
											"const consentStatus = jsonData.consentStatus;",
											"",
											"pm.test(\"Consent status is TERMINATED_BY_ASPSP\", () => {",
											"    pm.expect(consentStatus).to.eql(\"TERMINATED_BY_ASPSP\");",
											"});",
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"method": "GET",
								"header": [
									{
										"key": "PSU-ID",
										"value": "{{psu_id_none}}",
										"type": "text"
									}
								],
								"url": {
									"raw": "{{protocol}}://{{url_cms}}/psu-api/v1/piis/consents/{{consent_id}}",
									"protocol": "{{protocol}}",
									"host": [
										"{{url_cms}}"
									],
									"path": [
										"psu-api",
										"v1",
										"piis",
										"consents",
										"{{consent_id}}"
									]
								}
							},
							"response": []
						},
						{
							"name": "4. Create another PIIS consent with same PSU and TPP",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"id": "30b058ae-dee6-4373-a9c1-a46129eff7dc",
										"exec": [
											""
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "test",
									"script": {
										"id": "b111342e-3e7b-4886-80b4-48e19e23defc",
										"exec": [
											"pm.test(\"Status code is 201\", () => {",
											"    pm.response.to.have.status(201);",
											"});",
											"",
											"const jsonData = pm.response.json();",
											"const consentId = jsonData.consentId;",
											"",
											"pm.test(\"Consent ID is present\", () => {",
											"    pm.expect(consentId).not.eql(undefined);",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"name": "Content-Type",
										"type": "text",
										"value": "application/json"
									},
									{
										"key": "PSU-ID",
										"type": "text",
										"value": "{{psu_id_none}}"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n    \"account\": {\n        \"currency\": \"EUR\",\n        \"iban\": \"{{iban_none}}\",\n        \"aspspAccountId\": \"{{aspsp_account_id}}\"\n    },\n    \"tppAuthorisationNumber\": \"{{tpp_id}}\",\n    \"validUntil\": \"2021-10-10\"\n}"
								},
								"url": {
									"raw": "{{protocol}}://{{url_cms}}/aspsp-api/v1/piis/consents/",
									"protocol": "{{protocol}}",
									"host": [
										"{{url_cms}}"
									],
									"path": [
										"aspsp-api",
										"v1",
										"piis",
										"consents",
										""
									]
								}
							},
							"response": []
						},
						{
							"name": "5. Get first PIIS consent by ID",
							"event": [
								{
									"listen": "test",
									"script": {
										"id": "11cda92e-6ae2-4d0f-99bb-856bc7d28aa6",
										"exec": [
											"pm.test(\"Status code is 200\", () => {",
											"    pm.response.to.have.status(200);",
											"});",
											"",
											"const jsonData = pm.response.json();",
											"const consentStatus = jsonData.consentStatus;",
											"",
											"pm.test(\"Consent status is still TERMINATED_BY_ASPSP\", () => {",
											"    pm.expect(consentStatus).to.eql(\"TERMINATED_BY_ASPSP\");",
											"});",
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"method": "GET",
								"header": [
									{
										"key": "PSU-ID",
										"value": "{{psu_id_none}}",
										"type": "text"
									}
								],
								"url": {
									"raw": "{{protocol}}://{{url_cms}}/psu-api/v1/piis/consents/{{consent_id}}",
									"protocol": "{{protocol}}",
									"host": [
										"{{url_cms}}"
									],
									"path": [
										"psu-api",
										"v1",
										"piis",
										"consents",
										"{{consent_id}}"
									]
								}
							},
							"response": []
						}
					],
					"protocolProfileBehavior": {},
					"_postman_isSubFolder": true
				}
			],
			"protocolProfileBehavior": {}
		},
		{
			"name": "AIS Consents",
			"item": [
				{
					"name": "Consent Bank offered with owner name",
					"item": [
						{
							"name": "create with owner name and update",
							"item": [
								{
									"name": "1. Enable bank offered consent support in ASPSP profile",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "1f2d099c-d14f-42d8-900e-195e10481fbe",
												"exec": [
													"pm.test(\"Status code is 200\", () => {",
													"    pm.response.to.have.status(200);",
													"});",
													""
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "PUT",
										"header": [
											{
												"key": "Content-Type",
												"name": "Content-Type",
												"value": "application/json",
												"type": "text"
											}
										],
										"body": {
											"mode": "raw",
											"raw": "{\n    \"ais\": {\n      \"consentTypes\": {\n        \"bankOfferedConsentSupported\": true,\n        \"globalConsentSupported\": false,\n        \"availableAccountsConsentSupported\": true,\n        \"accountAccessFrequencyPerDay\": 4,\n        \"notConfirmedConsentExpirationTimeMs\": 86400000,\n        \"maxConsentValidityDays\": 0,\n        \"accountOwnerInformationSupported\": true\n      },\n      \"redirectLinkToOnlineBanking\": {\n        \"aisRedirectUrlToAspsp\": \"http://localhost:4200/ais/{redirect-id}/{encrypted-consent-id}\"\n      },\n      \"transactionParameters\": {\n        \"availableBookingStatuses\": [\n          \"BOTH\"\n        ],\n        \"transactionsWithoutBalancesSupported\": false,\n            \"supportedTransactionApplicationTypes\": [\n            \t\"application/json\"\n            ]\n      },\n      \"deltaReportSettings\": {\n        \"entryReferenceFromSupported\": false,\n        \"deltaListSupported\": false\n      },\n      \"scaRequirementsForOneTimeConsents\": {\n        \"scaByOneTimeAvailableAccountsConsentRequired\": true,\n            \"scaByOneTimeGlobalConsentRequired\": true\n      }\n    },\n    \"pis\": {\n      \"supportedPaymentTypeAndProductMatrix\": {\n        \"payments\": [\n          \"sepa-credit-transfers\",\n          \"instant-sepa-credit-transfers\"\n        ]\n      },\n      \"maxTransactionValidityDays\": 0,\n      \"notConfirmedPaymentExpirationTimeMs\": 86400000,\n      \"paymentCancellationAuthorisationMandated\": false,\n      \"redirectLinkToOnlineBanking\": {\n        \"pisRedirectUrlToAspsp\": \"http://localhost:4200/pis/{redirect-id}/{encrypted-payment-id}\",\n        \"pisPaymentCancellationRedirectUrlToAspsp\": \"http://localhost:4200/pis/cancellation/{redirect-id}/{encrypted-payment-id}\",\n        \"paymentCancellationRedirectUrlExpirationTimeMs\": 600000\n      },\n        \"supportedTransactionStatusFormats\": [\n            \"application/json\"\n        ]\n    },\n    \"piis\": {\n      \"piisConsentSupported\": \"NOT_SUPPORTED\"\n    },\n    \"sb\": {\n        \"signingBasketSupported\": false\n    },\n    \"common\": {\n      \"scaRedirectFlow\": \"REDIRECT\",\n      \"startAuthorisationMode\": \"auto\",\n      \"tppSignatureRequired\": false,\n      \"psuInInitialRequestMandated\": false,\n      \"redirectUrlExpirationTimeMs\": 600000,\n      \"authorisationExpirationTimeMs\": 86400000,\n      \"forceXs2aBaseLinksUrl\": false,\n      \"xs2aBaseLinksUrl\": \"http://myhost.com/\",\n      \"supportedAccountReferenceFields\": [\n        \"IBAN\"\n      ],\n      \"multicurrencyAccountLevelSupported\": \"SUBACCOUNT\",\n      \"aisPisSessionsSupported\": false,\n      \"aspspNotificationsSupported\": [\n        \t\"NONE\"\t\n      ],\n     \t\"authorisationConfirmationRequestMandated\": false,\n      \"authorisationConfirmationCheckByXs2a\": false, \n    \t\"checkUriComplianceToDomainSupported\": false \n   }\n}",
											"options": {
												"raw": {
													"language": "json"
												}
											}
										},
										"url": {
											"raw": "{{protocol}}://{{url_aspsp_profile}}/api/v1/aspsp-profile/for-debug/aspsp-settings",
											"protocol": "{{protocol}}",
											"host": [
												"{{url_aspsp_profile}}"
											],
											"path": [
												"api",
												"v1",
												"aspsp-profile",
												"for-debug",
												"aspsp-settings"
											]
										}
									},
									"response": []
								},
								{
									"name": "2. Set redirect SCA approach",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "51980baa-213d-4b1c-bb28-ea726e35006a",
												"exec": [
													"pm.test(\"Status code is 200\", () => {",
													"    pm.response.to.have.status(200);",
													"});",
													""
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "PUT",
										"header": [
											{
												"key": "Content-Type",
												"name": "Content-Type",
												"value": "application/json",
												"type": "text"
											}
										],
										"body": {
											"mode": "raw",
											"raw": "[\n\"REDIRECT\",\n  \"EMBEDDED\",\n  \"DECOUPLED\"\n]"
										},
										"url": {
											"raw": "{{protocol}}://{{url_aspsp_profile}}/api/v1/aspsp-profile/for-debug/sca-approaches",
											"protocol": "{{protocol}}",
											"host": [
												"{{url_aspsp_profile}}"
											],
											"path": [
												"api",
												"v1",
												"aspsp-profile",
												"for-debug",
												"sca-approaches"
											]
										}
									},
									"response": []
								},
								{
									"name": "3. create consent bank offered",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "d9b36be3-c939-4817-80be-2ead9d5b34eb",
												"exec": [
													"const jsonData = pm.response.json();",
													"",
													"pm.test(\"Consent Id exists\", () => {",
													"   pm.expect(jsonData).to.have.property('consentId');",
													"});",
													"",
													"pm.test(\"Status code is 201\", () => {",
													"    pm.response.to.have.status(201);",
													"});",
													"",
													"pm.test(\"scaRedirect link exists\", () => {",
													"    pm.expect(jsonData).to.have.property('_links');",
													"    const _links = jsonData._links;",
													"    ",
													"    var scaRedirect = _links.scaRedirect.href;",
													"",
													"    if (scaRedirect === undefined) {",
													"       pm.expect().fail();",
													"    } ",
													"    ",
													"    if (scaRedirect !== undefined) {",
													"        var a = scaRedirect.split('/');",
													"        a.pop();",
													"        const authorisationId = a.pop();",
													"        pm.globals.set(\"authorisation_id\", authorisationId);",
													"    }",
													"",
													"    const scaStatusParts = jsonData._links.scaStatus.href.split('/');",
													"    const redirectId = scaStatusParts.pop() || scaStatusParts.pop();",
													"    pm.globals.set(\"redirect_id\", redirectId);",
													"    ",
													"});",
													"",
													"pm.test(\"Consent status is received\", () => {",
													"    pm.expect(jsonData.consentStatus).to.eql('received');",
													"});",
													"",
													"pm.globals.set(\"consent_id\", jsonData.consentId);"
												],
												"type": "text/javascript"
											}
										},
										{
											"listen": "prerequest",
											"script": {
												"id": "1e52113b-0c3c-4fe6-9ecd-2b6adc335a78",
												"exec": [
													"pm.globals.unset(\"consent_id\");"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "POST",
										"header": [
											{
												"key": "accept",
												"value": "application/json",
												"type": "text"
											},
											{
												"key": "PSU-ID",
												"value": "{{psu_id_single}}",
												"type": "text"
											},
											{
												"key": "X-Request-ID",
												"value": "{{x_request_id}}",
												"type": "text"
											},
											{
												"key": "Content-Type",
												"value": "application/json",
												"type": "text"
											},
											{
												"key": "psu-ip-address",
												"value": "{{ip_address}}",
												"type": "text"
											},
											{
												"key": "tpp-redirect-uri",
												"value": "{{tpp-redirect-uri}}",
												"type": "text"
											}
										],
										"body": {
											"mode": "raw",
											"raw": "{\n  \"access\": {\n        \"accounts\": [\n            {\n                \"currency\": \"EUR\",\n                \"iban\": \"{{iban_single}}\"\n            }\n        ],\n        \"balances\": [\n            {\n                \"currency\": \"EUR\",\n                \"iban\": \"{{iban_single}}\"\n            }\n        ],\n        \"transactions\": [\n            {\n                \"currency\": \"EUR\",\n                \"iban\": \"{{iban_single}}\"\n            }\n        ],\n        \"additionalInformation\": {\n            \"ownerName\": [\n                {\n                \"currency\": \"EUR\",\n                \"iban\": \"{{iban_single}}\"\n            }\n            ]\n        }\n    },\n  \"combinedServiceIndicator\": false,\n  \"frequencyPerDay\": 10,\n  \"recurringIndicator\": true,\n  \"validUntil\": \"2021-10-10\"\n}"
										},
										"url": {
											"raw": "{{protocol}}://{{url_xs2a}}/v1/consents",
											"protocol": "{{protocol}}",
											"host": [
												"{{url_xs2a}}"
											],
											"path": [
												"v1",
												"consents"
											]
										}
									},
									"response": []
								},
								{
									"name": "4. Get consent response object by redirect id",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "716f4954-277f-45ec-bb3b-3ed124c1937d",
												"exec": [
													"pm.test(\"Status code is 200\", () => {",
													"    pm.response.to.have.status(200);",
													"});",
													"",
													"const jsonData = pm.response.json();",
													"",
													"pm.test(\"Authorisation id is present\", () => {",
													"    pm.expect(jsonData).to.have.property(\"authorisationId\");",
													"});",
													"",
													"const authorisationId = jsonData.authorisationId;",
													"pm.test(\"Authorisation id is correct\", () => {",
													"    pm.expect(authorisationId).to.eql(pm.globals.get(\"redirect_id\"));",
													"});",
													"",
													"pm.test(\"Consent id is present\", () => {",
													"    pm.expect(jsonData.accountConsent).to.have.property(\"id\");",
													"});",
													"",
													"pm.test(\"Owner name is present\", ()=> {",
													"    pm.expect(jsonData.accountConsent.access).to.have.property(\"accountAdditionalInformationAccess\");",
													"    pm.expect(jsonData.accountConsent.access.accountAdditionalInformationAccess).to.have.property(\"ownerName\");",
													"});",
													"",
													"pm.test(\"Owner name is correct\", ()=> {",
													"    ownerName = jsonData.accountConsent.access.accountAdditionalInformationAccess.ownerName[0];",
													"",
													"    pm.expect(ownerName.iban).to.equal('DE80760700240271232400');",
													"});",
													"",
													"pm.globals.set(\"internal_consent_id\", jsonData.accountConsent.id);",
													"pm.globals.set(\"authorisation_id\", authorisationId);"
												],
												"type": "text/javascript"
											}
										},
										{
											"listen": "prerequest",
											"script": {
												"id": "cd04e29c-e225-40eb-81e2-60c8eff19bb6",
												"exec": [
													"pm.globals.unset(\"internal_consent_id\");",
													"pm.globals.unset(\"authorisation_id\");"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "GET",
										"header": [],
										"url": {
											"raw": "{{protocol}}://{{url_cms}}/psu-api/v1/ais/consent/redirect/{{redirect_id}}",
											"protocol": "{{protocol}}",
											"host": [
												"{{url_cms}}"
											],
											"path": [
												"psu-api",
												"v1",
												"ais",
												"consent",
												"redirect",
												"{{redirect_id}}"
											]
										}
									},
									"response": []
								},
								{
									"name": "5. update in cms",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "3dcd5633-7afc-4f94-8ff2-3cb24e874423",
												"exec": [
													"pm.test(\"Status code is 200\", () => {",
													"    pm.response.to.have.status(200);",
													"});"
												],
												"type": "text/javascript"
											}
										},
										{
											"listen": "prerequest",
											"script": {
												"id": "0a20bf3f-f9d3-4bc1-a0aa-cee5589f63ec",
												"exec": [
													""
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "PUT",
										"header": [
											{
												"key": "Accept",
												"value": "application/json",
												"type": "text"
											},
											{
												"key": "Content-Type",
												"value": "application/json",
												"type": "text"
											},
											{
												"key": "X-Request-ID",
												"value": "{{x_request_id}}",
												"type": "text",
												"disabled": true
											}
										],
										"body": {
											"mode": "raw",
											"raw": "{\n\"accountAccess\": {\n        \"accounts\": [\n            {\n                \"currency\": \"EUR\",\n                \"iban\": \"{{iban_single}}\"\n            }\n        ],\n        \"balances\": [\n            {\n                \"currency\": \"EUR\",\n                \"iban\": \"{{iban_single}}\"\n            }\n        ],\n        \"transactions\": [\n            {\n                \"currency\": \"EUR\",\n                \"iban\": \"{{iban_single}}\"\n            }\n        ],\n        \"accountAdditionalInformationAccess\": {\n            \"ownerName\": [\n                {\n                \"currency\": \"EUR\",\n                \"iban\": \"{{iban_none}}\"\n            }\n            ]\n        }\n    },\n  \"combinedServiceIndicator\": false,\n  \"frequencyPerDay\": 15,\n  \"recurringIndicator\": true,\n  \"validUntil\": \"2025-10-10\"\n}"
										},
										"url": {
											"raw": "{{protocol}}://{{url_cms}}/psu-api/v1/ais/consent/{{internal_consent_id}}/save-access",
											"protocol": "{{protocol}}",
											"host": [
												"{{url_cms}}"
											],
											"path": [
												"psu-api",
												"v1",
												"ais",
												"consent",
												"{{internal_consent_id}}",
												"save-access"
											]
										}
									},
									"response": []
								},
								{
									"name": "6. Get consent response object by redirect id",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "68136316-06cc-4e6b-938c-8d85d67e6619",
												"exec": [
													"pm.test(\"Status code is 200\", () => {",
													"    pm.response.to.have.status(200);",
													"});",
													"",
													"const jsonData = pm.response.json();",
													"",
													"pm.test(\"Authorisation id is present\", () => {",
													"    pm.expect(jsonData).to.have.property(\"authorisationId\");",
													"});",
													"",
													"const authorisationId = jsonData.authorisationId;",
													"pm.test(\"Authorisation id is correct\", () => {",
													"    pm.expect(authorisationId).to.eql(pm.globals.get(\"redirect_id\"));",
													"});",
													"",
													"pm.test(\"Consent id is present\", () => {",
													"    pm.expect(jsonData.accountConsent).to.have.property(\"id\");",
													"});",
													"",
													"pm.test(\"Owner name is present\", ()=> {",
													"    pm.expect(jsonData.accountConsent.access).to.have.property(\"accountAdditionalInformationAccess\");",
													"    pm.expect(jsonData.accountConsent.access.accountAdditionalInformationAccess).to.have.property(\"ownerName\");",
													"});",
													"",
													"pm.test(\"Owner name is correct\", ()=> {",
													"    ownerName = jsonData.accountConsent.access.accountAdditionalInformationAccess.ownerName[0];",
													"",
													"    pm.expect(ownerName.iban).to.equal('DE69760700240340283600');",
													"});",
													"",
													"pm.globals.set(\"internal_consent_id\", jsonData.accountConsent.id);",
													"pm.globals.set(\"authorisation_id\", authorisationId);"
												],
												"type": "text/javascript"
											}
										},
										{
											"listen": "prerequest",
											"script": {
												"id": "20da8d21-0271-40f9-b893-f38f4369d259",
												"exec": [
													"pm.globals.unset(\"internal_consent_id\");",
													"pm.globals.unset(\"authorisation_id\");"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "GET",
										"header": [],
										"url": {
											"raw": "{{protocol}}://{{url_cms}}/psu-api/v1/ais/consent/redirect/{{redirect_id}}",
											"protocol": "{{protocol}}",
											"host": [
												"{{url_cms}}"
											],
											"path": [
												"psu-api",
												"v1",
												"ais",
												"consent",
												"redirect",
												"{{redirect_id}}"
											]
										}
									},
									"response": []
								},
								{
									"name": "7. update in cms without owner name",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "8b7eb736-72d9-4727-b080-23acd7c959ff",
												"exec": [
													"pm.test(\"Status code is 200\", () => {",
													"    pm.response.to.have.status(200);",
													"});"
												],
												"type": "text/javascript"
											}
										},
										{
											"listen": "prerequest",
											"script": {
												"id": "8423a991-7b4c-4b4f-a55a-53e28e500993",
												"exec": [
													""
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "PUT",
										"header": [
											{
												"key": "Accept",
												"type": "text",
												"value": "application/json"
											},
											{
												"key": "Content-Type",
												"type": "text",
												"value": "application/json"
											},
											{
												"key": "X-Request-ID",
												"type": "text",
												"value": "{{x_request_id}}",
												"disabled": true
											}
										],
										"body": {
											"mode": "raw",
											"raw": "{\n\"accountAccess\": {\n        \"accounts\": [\n            {\n                \"currency\": \"EUR\",\n                \"iban\": \"{{iban_single}}\"\n            }\n        ],\n        \"balances\": [\n            {\n                \"currency\": \"EUR\",\n                \"iban\": \"{{iban_single}}\"\n            }\n        ],\n        \"transactions\": [\n            {\n                \"currency\": \"EUR\",\n                \"iban\": \"{{iban_single}}\"\n            }\n        ]\n    },\n  \"combinedServiceIndicator\": false,\n  \"frequencyPerDay\": 15,\n  \"recurringIndicator\": true,\n  \"validUntil\": \"2025-10-10\"\n}"
										},
										"url": {
											"raw": "{{protocol}}://{{url_cms}}/psu-api/v1/ais/consent/{{internal_consent_id}}/save-access",
											"protocol": "{{protocol}}",
											"host": [
												"{{url_cms}}"
											],
											"path": [
												"psu-api",
												"v1",
												"ais",
												"consent",
												"{{internal_consent_id}}",
												"save-access"
											]
										}
									},
									"response": []
								},
								{
									"name": "6. Get consent response object by redirect id",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "e24f85aa-6e12-4676-8d6d-d6a89bf3d01e",
												"exec": [
													"pm.test(\"Status code is 200\", () => {",
													"    pm.response.to.have.status(200);",
													"});",
													"",
													"const jsonData = pm.response.json();",
													"",
													"pm.test(\"Authorisation id is present\", () => {",
													"    pm.expect(jsonData).to.have.property(\"authorisationId\");",
													"});",
													"",
													"const authorisationId = jsonData.authorisationId;",
													"pm.test(\"Authorisation id is correct\", () => {",
													"    pm.expect(authorisationId).to.eql(pm.globals.get(\"redirect_id\"));",
													"});",
													"",
													"pm.test(\"Consent id is present\", () => {",
													"    pm.expect(jsonData.accountConsent).to.have.property(\"id\");",
													"});",
													"",
													"pm.test(\"Owner name is present\", ()=> {",
													"    pm.expect(jsonData.accountConsent.access).to.have.property(\"accountAdditionalInformationAccess\");",
													"    pm.expect(jsonData.accountConsent.access.accountAdditionalInformationAccess).to.have.property(\"ownerName\");",
													"});",
													"",
													"pm.test(\"Owner name is empty\", ()=> {",
													"    ownerName = jsonData.accountConsent.access.accountAdditionalInformationAccess.ownerName;",
													"    ",
													"    pm.expect(ownerName).to.be.empty;",
													"});",
													"",
													"pm.globals.set(\"internal_consent_id\", jsonData.accountConsent.id);",
													"pm.globals.set(\"authorisation_id\", authorisationId);"
												],
												"type": "text/javascript"
											}
										},
										{
											"listen": "prerequest",
											"script": {
												"id": "c4d427da-9fa5-4ddb-b7fc-c72cf2b39a4f",
												"exec": [
													"pm.globals.unset(\"internal_consent_id\");",
													"pm.globals.unset(\"authorisation_id\");"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "GET",
										"header": [],
										"url": {
											"raw": "{{protocol}}://{{url_cms}}/psu-api/v1/ais/consent/redirect/{{redirect_id}}",
											"protocol": "{{protocol}}",
											"host": [
												"{{url_cms}}"
											],
											"path": [
												"psu-api",
												"v1",
												"ais",
												"consent",
												"redirect",
												"{{redirect_id}}"
											]
										}
									},
									"response": []
								}
							],
							"protocolProfileBehavior": {},
							"_postman_isSubFolder": true
						},
						{
							"name": "create without owner name and update with owner name",
							"item": [
								{
									"name": "1. Enable bank offered consent support in ASPSP profile",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "40905d1c-87b5-43dd-af22-0024613677c0",
												"exec": [
													"pm.test(\"Status code is 200\", () => {",
													"    pm.response.to.have.status(200);",
													"});",
													""
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "PUT",
										"header": [
											{
												"key": "Content-Type",
												"name": "Content-Type",
												"value": "application/json",
												"type": "text"
											}
										],
										"body": {
											"mode": "raw",
											"raw": "{\n    \"ais\": {\n      \"consentTypes\": {\n        \"bankOfferedConsentSupported\": true,\n        \"globalConsentSupported\": false,\n        \"availableAccountsConsentSupported\": true,\n        \"accountAccessFrequencyPerDay\": 4,\n        \"notConfirmedConsentExpirationTimeMs\": 86400000,\n        \"maxConsentValidityDays\": 0,\n        \"accountOwnerInformationSupported\": true\n      },\n      \"redirectLinkToOnlineBanking\": {\n        \"aisRedirectUrlToAspsp\": \"http://localhost:4200/ais/{redirect-id}/{encrypted-consent-id}\"\n      },\n      \"transactionParameters\": {\n        \"availableBookingStatuses\": [\n          \"BOTH\"\n        ],\n        \"transactionsWithoutBalancesSupported\": false,\n            \"supportedTransactionApplicationTypes\": [\n            \t\"application/json\"\n            ]\n      },\n      \"deltaReportSettings\": {\n        \"entryReferenceFromSupported\": false,\n        \"deltaListSupported\": false\n      },\n      \"scaRequirementsForOneTimeConsents\": {\n        \"scaByOneTimeAvailableAccountsConsentRequired\": true,\n            \"scaByOneTimeGlobalConsentRequired\": true\n      }\n    },\n    \"pis\": {\n      \"supportedPaymentTypeAndProductMatrix\": {\n        \"payments\": [\n          \"sepa-credit-transfers\",\n          \"instant-sepa-credit-transfers\"\n        ]\n      },\n      \"maxTransactionValidityDays\": 0,\n      \"notConfirmedPaymentExpirationTimeMs\": 86400000,\n      \"paymentCancellationAuthorisationMandated\": false,\n      \"redirectLinkToOnlineBanking\": {\n        \"pisRedirectUrlToAspsp\": \"http://localhost:4200/pis/{redirect-id}/{encrypted-payment-id}\",\n        \"pisPaymentCancellationRedirectUrlToAspsp\": \"http://localhost:4200/pis/cancellation/{redirect-id}/{encrypted-payment-id}\",\n        \"paymentCancellationRedirectUrlExpirationTimeMs\": 600000\n      },\n        \"supportedTransactionStatusFormats\": [\n            \"application/json\"\n        ]\n    },\n    \"piis\": {\n      \"piisConsentSupported\": \"NOT_SUPPORTED\"\n    },\n    \"sb\": {\n        \"signingBasketSupported\": false\n    },\n    \"common\": {\n      \"scaRedirectFlow\": \"REDIRECT\",\n      \"startAuthorisationMode\": \"auto\",\n      \"tppSignatureRequired\": false,\n      \"psuInInitialRequestMandated\": false,\n      \"redirectUrlExpirationTimeMs\": 600000,\n      \"authorisationExpirationTimeMs\": 86400000,\n      \"forceXs2aBaseLinksUrl\": false,\n      \"xs2aBaseLinksUrl\": \"http://myhost.com/\",\n      \"supportedAccountReferenceFields\": [\n        \"IBAN\"\n      ],\n      \"multicurrencyAccountLevelSupported\": \"SUBACCOUNT\",\n      \"aisPisSessionsSupported\": false,\n      \"aspspNotificationsSupported\": [\n        \t\"NONE\"\t\n      ],\n     \t\"authorisationConfirmationRequestMandated\": false,\n      \"authorisationConfirmationCheckByXs2a\": false, \n    \t\"checkUriComplianceToDomainSupported\": false \n   }\n}",
											"options": {
												"raw": {
													"language": "json"
												}
											}
										},
										"url": {
											"raw": "{{protocol}}://{{url_aspsp_profile}}/api/v1/aspsp-profile/for-debug/aspsp-settings",
											"protocol": "{{protocol}}",
											"host": [
												"{{url_aspsp_profile}}"
											],
											"path": [
												"api",
												"v1",
												"aspsp-profile",
												"for-debug",
												"aspsp-settings"
											]
										}
									},
									"response": []
								},
								{
									"name": "2. Set redirect SCA approach",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "eec716cf-3cbf-4df8-a83a-2e0a72c3717a",
												"exec": [
													"pm.test(\"Status code is 200\", () => {",
													"    pm.response.to.have.status(200);",
													"});",
													""
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "PUT",
										"header": [
											{
												"key": "Content-Type",
												"name": "Content-Type",
												"value": "application/json",
												"type": "text"
											}
										],
										"body": {
											"mode": "raw",
											"raw": "[\n\"REDIRECT\",\n  \"EMBEDDED\",\n  \"DECOUPLED\"\n]"
										},
										"url": {
											"raw": "{{protocol}}://{{url_aspsp_profile}}/api/v1/aspsp-profile/for-debug/sca-approaches",
											"protocol": "{{protocol}}",
											"host": [
												"{{url_aspsp_profile}}"
											],
											"path": [
												"api",
												"v1",
												"aspsp-profile",
												"for-debug",
												"sca-approaches"
											]
										}
									},
									"response": []
								},
								{
									"name": "3. create consent bank offered",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "df2007b6-1767-4556-a9e7-c6f7358378fd",
												"exec": [
													"const jsonData = pm.response.json();",
													"",
													"pm.test(\"Consent Id exists\", () => {",
													"   pm.expect(jsonData).to.have.property('consentId');",
													"});",
													"",
													"pm.test(\"Status code is 201\", () => {",
													"    pm.response.to.have.status(201);",
													"});",
													"",
													"pm.test(\"scaRedirect link exists\", () => {",
													"    pm.expect(jsonData).to.have.property('_links');",
													"    const _links = jsonData._links;",
													"    ",
													"    var scaRedirect = _links.scaRedirect.href;",
													"",
													"    if (scaRedirect === undefined) {",
													"       pm.expect().fail();",
													"    } ",
													"    ",
													"    if (scaRedirect !== undefined) {",
													"        var a = scaRedirect.split('/');",
													"        a.pop();",
													"        const authorisationId = a.pop();",
													"        pm.globals.set(\"authorisation_id\", authorisationId);",
													"    }",
													"",
													"    const scaStatusParts = jsonData._links.scaStatus.href.split('/');",
													"    const redirectId = scaStatusParts.pop() || scaStatusParts.pop();",
													"    pm.globals.set(\"redirect_id\", redirectId);",
													"    ",
													"});",
													"",
													"pm.test(\"Consent status is received\", () => {",
													"    pm.expect(jsonData.consentStatus).to.eql('received');",
													"});",
													"",
													"pm.globals.set(\"consent_id\", jsonData.consentId);"
												],
												"type": "text/javascript"
											}
										},
										{
											"listen": "prerequest",
											"script": {
												"id": "bc0bd40d-3c8f-4b30-981f-118cb95a32d3",
												"exec": [
													"pm.globals.unset(\"consent_id\");"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "POST",
										"header": [
											{
												"key": "accept",
												"value": "application/json",
												"type": "text"
											},
											{
												"key": "PSU-ID",
												"value": "{{psu_id_single}}",
												"type": "text"
											},
											{
												"key": "X-Request-ID",
												"value": "{{x_request_id}}",
												"type": "text"
											},
											{
												"key": "Content-Type",
												"value": "application/json",
												"type": "text"
											},
											{
												"key": "psu-ip-address",
												"value": "{{ip_address}}",
												"type": "text"
											},
											{
												"key": "tpp-redirect-uri",
												"value": "{{tpp-redirect-uri}}",
												"type": "text"
											}
										],
										"body": {
											"mode": "raw",
											"raw": "{\n  \"access\": {\n        \"accounts\": [\n            {\n                \"currency\": \"EUR\",\n                \"iban\": \"{{iban_single}}\"\n            }\n        ],\n        \"balances\": [\n            {\n                \"currency\": \"EUR\",\n                \"iban\": \"{{iban_single}}\"\n            }\n        ],\n        \"transactions\": [\n            {\n                \"currency\": \"EUR\",\n                \"iban\": \"{{iban_single}}\"\n            }\n        ]\n    },\n  \"combinedServiceIndicator\": false,\n  \"frequencyPerDay\": 10,\n  \"recurringIndicator\": true,\n  \"validUntil\": \"2021-10-10\"\n}"
										},
										"url": {
											"raw": "{{protocol}}://{{url_xs2a}}/v1/consents",
											"protocol": "{{protocol}}",
											"host": [
												"{{url_xs2a}}"
											],
											"path": [
												"v1",
												"consents"
											]
										}
									},
									"response": []
								},
								{
									"name": "4. Get consent response object by redirect id",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "64820d4e-c38e-4b27-b304-4bcd3c852c94",
												"exec": [
													"pm.test(\"Status code is 200\", () => {",
													"    pm.response.to.have.status(200);",
													"});",
													"",
													"const jsonData = pm.response.json();",
													"",
													"pm.test(\"Authorisation id is present\", () => {",
													"    pm.expect(jsonData).to.have.property(\"authorisationId\");",
													"});",
													"",
													"const authorisationId = jsonData.authorisationId;",
													"pm.test(\"Authorisation id is correct\", () => {",
													"    pm.expect(authorisationId).to.eql(pm.globals.get(\"redirect_id\"));",
													"});",
													"",
													"pm.test(\"Consent id is present\", () => {",
													"    pm.expect(jsonData.accountConsent).to.have.property(\"id\");",
													"});",
													"",
													"pm.test(\"Owner name is absent\", ()=> {",
													"    pm.expect(jsonData.accountConsent.access).to.have.property(\"accountAdditionalInformationAccess\");",
													"    pm.expect(jsonData.accountConsent.access.accountAdditionalInformationAccess).to.not.have.property(\"ownerName\");",
													"});",
													"",
													"pm.globals.set(\"internal_consent_id\", jsonData.accountConsent.id);",
													"pm.globals.set(\"authorisation_id\", authorisationId);"
												],
												"type": "text/javascript"
											}
										},
										{
											"listen": "prerequest",
											"script": {
												"id": "c8f9d2d0-64dd-46c0-8613-94536011c839",
												"exec": [
													"pm.globals.unset(\"internal_consent_id\");",
													"pm.globals.unset(\"authorisation_id\");"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "GET",
										"header": [],
										"url": {
											"raw": "{{protocol}}://{{url_cms}}/psu-api/v1/ais/consent/redirect/{{redirect_id}}",
											"protocol": "{{protocol}}",
											"host": [
												"{{url_cms}}"
											],
											"path": [
												"psu-api",
												"v1",
												"ais",
												"consent",
												"redirect",
												"{{redirect_id}}"
											]
										}
									},
									"response": []
								},
								{
									"name": "5. update in cms",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "c9da62ac-68a2-4fe0-9a97-8ce900aab852",
												"exec": [
													"pm.test(\"Status code is 200\", () => {",
													"    pm.response.to.have.status(200);",
													"});"
												],
												"type": "text/javascript"
											}
										},
										{
											"listen": "prerequest",
											"script": {
												"id": "a28c9d84-b4fc-48b3-817d-eb0a7fd341e4",
												"exec": [
													""
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "PUT",
										"header": [
											{
												"key": "Accept",
												"value": "application/json",
												"type": "text"
											},
											{
												"key": "Content-Type",
												"value": "application/json",
												"type": "text"
											},
											{
												"key": "X-Request-ID",
												"value": "{{x_request_id}}",
												"type": "text",
												"disabled": true
											}
										],
										"body": {
											"mode": "raw",
											"raw": "{\n\"accountAccess\": {\n        \"accounts\": [\n            {\n                \"currency\": \"EUR\",\n                \"iban\": \"{{iban_single}}\"\n            }\n        ],\n        \"balances\": [\n            {\n                \"currency\": \"EUR\",\n                \"iban\": \"{{iban_single}}\"\n            }\n        ],\n        \"transactions\": [\n            {\n                \"currency\": \"EUR\",\n                \"iban\": \"{{iban_single}}\"\n            }\n        ],\n        \"accountAdditionalInformationAccess\": {\n            \"ownerName\": [\n                {\n                \"currency\": \"EUR\",\n                \"iban\": \"{{iban_none}}\"\n            }\n            ]\n        }\n    },\n  \"combinedServiceIndicator\": false,\n  \"frequencyPerDay\": 15,\n  \"recurringIndicator\": true,\n  \"validUntil\": \"2025-10-10\"\n}"
										},
										"url": {
											"raw": "{{protocol}}://{{url_cms}}/psu-api/v1/ais/consent/{{internal_consent_id}}/save-access",
											"protocol": "{{protocol}}",
											"host": [
												"{{url_cms}}"
											],
											"path": [
												"psu-api",
												"v1",
												"ais",
												"consent",
												"{{internal_consent_id}}",
												"save-access"
											]
										}
									},
									"response": []
								},
								{
									"name": "6. Get consent response object by redirect id",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "08b42380-000f-44fc-9aa5-4a3284b51fb8",
												"exec": [
													"pm.test(\"Status code is 200\", () => {",
													"    pm.response.to.have.status(200);",
													"});",
													"",
													"const jsonData = pm.response.json();",
													"",
													"pm.test(\"Authorisation id is present\", () => {",
													"    pm.expect(jsonData).to.have.property(\"authorisationId\");",
													"});",
													"",
													"const authorisationId = jsonData.authorisationId;",
													"pm.test(\"Authorisation id is correct\", () => {",
													"    pm.expect(authorisationId).to.eql(pm.globals.get(\"redirect_id\"));",
													"});",
													"",
													"pm.test(\"Consent id is present\", () => {",
													"    pm.expect(jsonData.accountConsent).to.have.property(\"id\");",
													"});",
													"",
													"pm.test(\"Owner name is present\", ()=> {",
													"    pm.expect(jsonData.accountConsent.access).to.have.property(\"accountAdditionalInformationAccess\");",
													"    pm.expect(jsonData.accountConsent.access.accountAdditionalInformationAccess).to.have.property(\"ownerName\");",
													"});",
													"",
													"pm.test(\"Owner name is correct\", ()=> {",
													"    ownerName = jsonData.accountConsent.access.accountAdditionalInformationAccess.ownerName[0];",
													"",
													"    pm.expect(ownerName.iban).to.equal('DE69760700240340283600');",
													"});",
													"",
													"pm.globals.set(\"internal_consent_id\", jsonData.accountConsent.id);",
													"pm.globals.set(\"authorisation_id\", authorisationId);"
												],
												"type": "text/javascript"
											}
										},
										{
											"listen": "prerequest",
											"script": {
												"id": "71cd5f91-9288-4ce9-9be4-584c440e81ab",
												"exec": [
													"pm.globals.unset(\"internal_consent_id\");",
													"pm.globals.unset(\"authorisation_id\");"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "GET",
										"header": [],
										"url": {
											"raw": "{{protocol}}://{{url_cms}}/psu-api/v1/ais/consent/redirect/{{redirect_id}}",
											"protocol": "{{protocol}}",
											"host": [
												"{{url_cms}}"
											],
											"path": [
												"psu-api",
												"v1",
												"ais",
												"consent",
												"redirect",
												"{{redirect_id}}"
											]
										}
									},
									"response": []
								}
							],
							"protocolProfileBehavior": {},
							"_postman_isSubFolder": true
						}
					],
					"protocolProfileBehavior": {},
					"_postman_isSubFolder": true
				},
				{
					"name": "Consent Bank offered with trusted beneficiaries",
					"item": [
						{
							"name": "create with trusted beneficiaries and update",
							"item": [
								{
									"name": "1. Enable bank offered consent support in ASPSP profile",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "d0f3a872-41c5-4a54-9680-a6ec53f24bf9",
												"exec": [
													"pm.test(\"Status code is 200\", () => {",
													"    pm.response.to.have.status(200);",
													"});",
													""
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "PUT",
										"header": [
											{
												"key": "Content-Type",
												"name": "Content-Type",
												"value": "application/json",
												"type": "text"
											}
										],
										"body": {
											"mode": "raw",
											"raw": "{\n    \"ais\": {\n      \"consentTypes\": {\n        \"bankOfferedConsentSupported\": true,\n        \"globalConsentSupported\": false,\n        \"availableAccountsConsentSupported\": true,\n        \"accountAccessFrequencyPerDay\": 4,\n        \"notConfirmedConsentExpirationTimeMs\": 86400000,\n        \"maxConsentValidityDays\": 0,\n        \"trustedBeneficiariesSupported\": true\n      },\n      \"redirectLinkToOnlineBanking\": {\n        \"aisRedirectUrlToAspsp\": \"http://localhost:4200/ais/{redirect-id}/{encrypted-consent-id}\"\n      },\n      \"transactionParameters\": {\n        \"availableBookingStatuses\": [\n          \"BOTH\"\n        ],\n        \"transactionsWithoutBalancesSupported\": false,\n            \"supportedTransactionApplicationTypes\": [\n            \t\"application/json\"\n            ]\n      },\n      \"deltaReportSettings\": {\n        \"entryReferenceFromSupported\": false,\n        \"deltaListSupported\": false\n      },\n      \"scaRequirementsForOneTimeConsents\": {\n        \"scaByOneTimeAvailableAccountsConsentRequired\": true,\n            \"scaByOneTimeGlobalConsentRequired\": true\n      }\n    },\n    \"pis\": {\n      \"supportedPaymentTypeAndProductMatrix\": {\n        \"payments\": [\n          \"sepa-credit-transfers\",\n          \"instant-sepa-credit-transfers\"\n        ]\n      },\n      \"maxTransactionValidityDays\": 0,\n      \"notConfirmedPaymentExpirationTimeMs\": 86400000,\n      \"paymentCancellationAuthorisationMandated\": false,\n      \"redirectLinkToOnlineBanking\": {\n        \"pisRedirectUrlToAspsp\": \"http://localhost:4200/pis/{redirect-id}/{encrypted-payment-id}\",\n        \"pisPaymentCancellationRedirectUrlToAspsp\": \"http://localhost:4200/pis/cancellation/{redirect-id}/{encrypted-payment-id}\",\n        \"paymentCancellationRedirectUrlExpirationTimeMs\": 600000\n      },\n        \"supportedTransactionStatusFormats\": [\n            \"application/json\"\n        ]\n    },\n    \"piis\": {\n      \"piisConsentSupported\": \"NOT_SUPPORTED\"\n    },\n    \"sb\": {\n        \"signingBasketSupported\": false\n    },\n    \"common\": {\n      \"scaRedirectFlow\": \"REDIRECT\",\n      \"startAuthorisationMode\": \"auto\",\n      \"tppSignatureRequired\": false,\n      \"psuInInitialRequestMandated\": false,\n      \"redirectUrlExpirationTimeMs\": 600000,\n      \"authorisationExpirationTimeMs\": 86400000,\n      \"forceXs2aBaseLinksUrl\": false,\n      \"xs2aBaseLinksUrl\": \"http://myhost.com/\",\n      \"supportedAccountReferenceFields\": [\n        \"IBAN\"\n      ],\n      \"multicurrencyAccountLevelSupported\": \"SUBACCOUNT\",\n      \"aisPisSessionsSupported\": false,\n      \"aspspNotificationsSupported\": [\n        \t\"NONE\"\t\n      ],\n     \t\"authorisationConfirmationRequestMandated\": false,\n      \"authorisationConfirmationCheckByXs2a\": false, \n    \t\"checkUriComplianceToDomainSupported\": false \n   }\n}",
											"options": {
												"raw": {
													"language": "json"
												}
											}
										},
										"url": {
											"raw": "{{protocol}}://{{url_aspsp_profile}}/api/v1/aspsp-profile/for-debug/aspsp-settings",
											"protocol": "{{protocol}}",
											"host": [
												"{{url_aspsp_profile}}"
											],
											"path": [
												"api",
												"v1",
												"aspsp-profile",
												"for-debug",
												"aspsp-settings"
											]
										}
									},
									"response": []
								},
								{
									"name": "2. Set redirect SCA approach",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "1b67b3c1-2e47-4656-96ff-3c86b934bf9a",
												"exec": [
													"pm.test(\"Status code is 200\", () => {",
													"    pm.response.to.have.status(200);",
													"});",
													""
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "PUT",
										"header": [
											{
												"key": "Content-Type",
												"name": "Content-Type",
												"value": "application/json",
												"type": "text"
											}
										],
										"body": {
											"mode": "raw",
											"raw": "[\n\"REDIRECT\",\n  \"EMBEDDED\",\n  \"DECOUPLED\"\n]"
										},
										"url": {
											"raw": "{{protocol}}://{{url_aspsp_profile}}/api/v1/aspsp-profile/for-debug/sca-approaches",
											"protocol": "{{protocol}}",
											"host": [
												"{{url_aspsp_profile}}"
											],
											"path": [
												"api",
												"v1",
												"aspsp-profile",
												"for-debug",
												"sca-approaches"
											]
										}
									},
									"response": []
								},
								{
									"name": "3. create consent bank offered",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "9cd98eae-f41e-4b6a-b4d2-31b9cabefa27",
												"exec": [
													"const jsonData = pm.response.json();",
													"",
													"pm.test(\"Consent Id exists\", () => {",
													"   pm.expect(jsonData).to.have.property('consentId');",
													"});",
													"",
													"pm.test(\"Status code is 201\", () => {",
													"    pm.response.to.have.status(201);",
													"});",
													"",
													"pm.test(\"scaRedirect link exists\", () => {",
													"    pm.expect(jsonData).to.have.property('_links');",
													"    const _links = jsonData._links;",
													"    ",
													"    var scaRedirect = _links.scaRedirect.href;",
													"",
													"    if (scaRedirect === undefined) {",
													"       pm.expect().fail();",
													"    } ",
													"    ",
													"    if (scaRedirect !== undefined) {",
													"        var a = scaRedirect.split('/');",
													"        a.pop();",
													"        const authorisationId = a.pop();",
													"        pm.globals.set(\"authorisation_id\", authorisationId);",
													"    }",
													"",
													"    const scaStatusParts = jsonData._links.scaStatus.href.split('/');",
													"    const redirectId = scaStatusParts.pop() || scaStatusParts.pop();",
													"    pm.globals.set(\"redirect_id\", redirectId);",
													"    ",
													"});",
													"",
													"pm.test(\"Consent status is received\", () => {",
													"    pm.expect(jsonData.consentStatus).to.eql('received');",
													"});",
													"",
													"pm.globals.set(\"consent_id\", jsonData.consentId);"
												],
												"type": "text/javascript"
											}
										},
										{
											"listen": "prerequest",
											"script": {
												"id": "223e3f41-5acd-4451-912b-eb2351e63d25",
												"exec": [
													"pm.globals.unset(\"consent_id\");"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "POST",
										"header": [
											{
												"key": "accept",
												"value": "application/json",
												"type": "text"
											},
											{
												"key": "PSU-ID",
												"value": "{{psu_id_single}}",
												"type": "text"
											},
											{
												"key": "X-Request-ID",
												"value": "{{x_request_id}}",
												"type": "text"
											},
											{
												"key": "Content-Type",
												"value": "application/json",
												"type": "text"
											},
											{
												"key": "psu-ip-address",
												"value": "{{ip_address}}",
												"type": "text"
											},
											{
												"key": "tpp-redirect-uri",
												"value": "{{tpp-redirect-uri}}",
												"type": "text"
											}
										],
										"body": {
											"mode": "raw",
											"raw": "{\n  \"access\": {\n        \"accounts\": [\n            {\n                \"currency\": \"EUR\",\n                \"iban\": \"{{iban_single}}\"\n            }\n        ],\n        \"balances\": [\n            {\n                \"currency\": \"EUR\",\n                \"iban\": \"{{iban_single}}\"\n            }\n        ],\n        \"transactions\": [\n            {\n                \"currency\": \"EUR\",\n                \"iban\": \"{{iban_single}}\"\n            }\n        ],\n        \"additionalInformation\": {\n             \"trustedBeneficiaries\": [\n                {\n                \"currency\": \"EUR\",\n                \"iban\": \"{{iban_single}}\"\n            }\n            ]\n        }\n    },\n  \"combinedServiceIndicator\": false,\n  \"frequencyPerDay\": 10,\n  \"recurringIndicator\": true,\n  \"validUntil\": \"2021-10-10\"\n}"
										},
										"url": {
											"raw": "{{protocol}}://{{url_xs2a}}/v1/consents",
											"protocol": "{{protocol}}",
											"host": [
												"{{url_xs2a}}"
											],
											"path": [
												"v1",
												"consents"
											]
										}
									},
									"response": []
								},
								{
									"name": "4. Get consent response object by redirect id",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "60d267f2-7d46-40d8-b0a0-b9aada6695aa",
												"exec": [
													"pm.test(\"Status code is 200\", () => {",
													"    pm.response.to.have.status(200);",
													"});",
													"",
													"const jsonData = pm.response.json();",
													"",
													"pm.test(\"Authorisation id is present\", () => {",
													"    pm.expect(jsonData).to.have.property(\"authorisationId\");",
													"});",
													"",
													"const authorisationId = jsonData.authorisationId;",
													"pm.test(\"Authorisation id is correct\", () => {",
													"    pm.expect(authorisationId).to.eql(pm.globals.get(\"redirect_id\"));",
													"});",
													"",
													"pm.test(\"Consent id is present\", () => {",
													"    pm.expect(jsonData.accountConsent).to.have.property(\"id\");",
													"});",
													"",
													"pm.test(\"Trusted benficiaries are present\", ()=> {",
													"    pm.expect(jsonData.accountConsent.access).to.have.property(\"accountAdditionalInformationAccess\");",
													"    pm.expect(jsonData.accountConsent.access.accountAdditionalInformationAccess).to.have.property(\"trustedBeneficiaries\");",
													"});",
													"",
													"pm.test(\"Trusted benficiaries are correct\", ()=> {",
													"    trustedBeneficiaries = jsonData.accountConsent.access.accountAdditionalInformationAccess.trustedBeneficiaries[0];",
													"",
													"    pm.expect(trustedBeneficiaries.iban).to.equal('DE80760700240271232400');",
													"});",
													"",
													"pm.globals.set(\"internal_consent_id\", jsonData.accountConsent.id);",
													"pm.globals.set(\"authorisation_id\", authorisationId);"
												],
												"type": "text/javascript"
											}
										},
										{
											"listen": "prerequest",
											"script": {
												"id": "f4762e10-6af1-4d33-b7eb-c4edb2fecbab",
												"exec": [
													"pm.globals.unset(\"internal_consent_id\");",
													"pm.globals.unset(\"authorisation_id\");"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "GET",
										"header": [],
										"url": {
											"raw": "{{protocol}}://{{url_cms}}/psu-api/v1/ais/consent/redirect/{{redirect_id}}",
											"protocol": "{{protocol}}",
											"host": [
												"{{url_cms}}"
											],
											"path": [
												"psu-api",
												"v1",
												"ais",
												"consent",
												"redirect",
												"{{redirect_id}}"
											]
										}
									},
									"response": []
								},
								{
									"name": "5. update in cms",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "91860e28-0d09-4335-b920-3a7432af97da",
												"exec": [
													"pm.test(\"Status code is 200\", () => {",
													"    pm.response.to.have.status(200);",
													"});"
												],
												"type": "text/javascript"
											}
										},
										{
											"listen": "prerequest",
											"script": {
												"id": "a440f37e-59aa-4849-b753-1bf09b4e463d",
												"exec": [
													""
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "PUT",
										"header": [
											{
												"key": "Accept",
												"value": "application/json",
												"type": "text"
											},
											{
												"key": "Content-Type",
												"value": "application/json",
												"type": "text"
											},
											{
												"key": "X-Request-ID",
												"value": "{{x_request_id}}",
												"type": "text",
												"disabled": true
											}
										],
										"body": {
											"mode": "raw",
											"raw": "{\n\"accountAccess\": {\n        \"accounts\": [\n            {\n                \"currency\": \"EUR\",\n                \"iban\": \"{{iban_single}}\"\n            }\n        ],\n        \"balances\": [\n            {\n                \"currency\": \"EUR\",\n                \"iban\": \"{{iban_single}}\"\n            }\n        ],\n        \"transactions\": [\n            {\n                \"currency\": \"EUR\",\n                \"iban\": \"{{iban_single}}\"\n            }\n        ],\n        \"accountAdditionalInformationAccess\": {\n             \"trustedBeneficiaries\": [\n                {\n                \"currency\": \"EUR\",\n                \"iban\": \"{{iban_none}}\"\n            }\n            ]\n        }\n    },\n  \"combinedServiceIndicator\": false,\n  \"frequencyPerDay\": 15,\n  \"recurringIndicator\": true,\n  \"validUntil\": \"2025-10-10\"\n}"
										},
										"url": {
											"raw": "{{protocol}}://{{url_cms}}/psu-api/v1/ais/consent/{{internal_consent_id}}/save-access",
											"protocol": "{{protocol}}",
											"host": [
												"{{url_cms}}"
											],
											"path": [
												"psu-api",
												"v1",
												"ais",
												"consent",
												"{{internal_consent_id}}",
												"save-access"
											]
										}
									},
									"response": []
								},
								{
									"name": "6. Get consent response object by redirect id",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "917fa1b0-af99-48ae-91aa-f13d73dd306b",
												"exec": [
													"pm.test(\"Status code is 200\", () => {",
													"    pm.response.to.have.status(200);",
													"});",
													"",
													"const jsonData = pm.response.json();",
													"",
													"pm.test(\"Authorisation id is present\", () => {",
													"    pm.expect(jsonData).to.have.property(\"authorisationId\");",
													"});",
													"",
													"const authorisationId = jsonData.authorisationId;",
													"pm.test(\"Authorisation id is correct\", () => {",
													"    pm.expect(authorisationId).to.eql(pm.globals.get(\"redirect_id\"));",
													"});",
													"",
													"pm.test(\"Consent id is present\", () => {",
													"    pm.expect(jsonData.accountConsent).to.have.property(\"id\");",
													"});",
													"",
													"pm.test(\"Trusted benficiaries are present\", ()=> {",
													"    pm.expect(jsonData.accountConsent.access).to.have.property(\"accountAdditionalInformationAccess\");",
													"    pm.expect(jsonData.accountConsent.access.accountAdditionalInformationAccess).to.have.property(\"trustedBeneficiaries\");",
													"});",
													"",
													"pm.test(\"Trusted benficiaries are correct\", ()=> {",
													"    trustedBeneficiaries = jsonData.accountConsent.access.accountAdditionalInformationAccess.trustedBeneficiaries[0];",
													"",
													"    pm.expect(trustedBeneficiaries.iban).to.equal('DE69760700240340283600');",
													"});",
													"",
													"pm.globals.set(\"internal_consent_id\", jsonData.accountConsent.id);",
													"pm.globals.set(\"authorisation_id\", authorisationId);"
												],
												"type": "text/javascript"
											}
										},
										{
											"listen": "prerequest",
											"script": {
												"id": "b793735a-dbbb-4f83-ac94-731b5f672314",
												"exec": [
													"pm.globals.unset(\"internal_consent_id\");",
													"pm.globals.unset(\"authorisation_id\");"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "GET",
										"header": [],
										"url": {
											"raw": "{{protocol}}://{{url_cms}}/psu-api/v1/ais/consent/redirect/{{redirect_id}}",
											"protocol": "{{protocol}}",
											"host": [
												"{{url_cms}}"
											],
											"path": [
												"psu-api",
												"v1",
												"ais",
												"consent",
												"redirect",
												"{{redirect_id}}"
											]
										}
									},
									"response": []
								},
								{
									"name": "7. update in cms without trusted beneficiaries",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "00df81ab-4757-4e95-abbc-f82d40879085",
												"exec": [
													"pm.test(\"Status code is 200\", () => {",
													"    pm.response.to.have.status(200);",
													"});"
												],
												"type": "text/javascript"
											}
										},
										{
											"listen": "prerequest",
											"script": {
												"id": "9a0dffeb-05f6-46c6-8f90-efadd2b1b8d1",
												"exec": [
													""
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "PUT",
										"header": [
											{
												"key": "Accept",
												"type": "text",
												"value": "application/json"
											},
											{
												"key": "Content-Type",
												"type": "text",
												"value": "application/json"
											},
											{
												"key": "X-Request-ID",
												"type": "text",
												"value": "{{x_request_id}}",
												"disabled": true
											}
										],
										"body": {
											"mode": "raw",
											"raw": "{\n\"accountAccess\": {\n        \"accounts\": [\n            {\n                \"currency\": \"EUR\",\n                \"iban\": \"{{iban_single}}\"\n            }\n        ],\n        \"balances\": [\n            {\n                \"currency\": \"EUR\",\n                \"iban\": \"{{iban_single}}\"\n            }\n        ],\n        \"transactions\": [\n            {\n                \"currency\": \"EUR\",\n                \"iban\": \"{{iban_single}}\"\n            }\n        ]\n    },\n  \"combinedServiceIndicator\": false,\n  \"frequencyPerDay\": 15,\n  \"recurringIndicator\": true,\n  \"validUntil\": \"2025-10-10\"\n}"
										},
										"url": {
											"raw": "{{protocol}}://{{url_cms}}/psu-api/v1/ais/consent/{{internal_consent_id}}/save-access",
											"protocol": "{{protocol}}",
											"host": [
												"{{url_cms}}"
											],
											"path": [
												"psu-api",
												"v1",
												"ais",
												"consent",
												"{{internal_consent_id}}",
												"save-access"
											]
										}
									},
									"response": []
								},
								{
									"name": "6. Get consent response object by redirect id",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "3d6505f5-d367-4d88-bd37-68425827366b",
												"exec": [
													"pm.test(\"Status code is 200\", () => {",
													"    pm.response.to.have.status(200);",
													"});",
													"",
													"const jsonData = pm.response.json();",
													"",
													"pm.test(\"Authorisation id is present\", () => {",
													"    pm.expect(jsonData).to.have.property(\"authorisationId\");",
													"});",
													"",
													"const authorisationId = jsonData.authorisationId;",
													"pm.test(\"Authorisation id is correct\", () => {",
													"    pm.expect(authorisationId).to.eql(pm.globals.get(\"redirect_id\"));",
													"});",
													"",
													"pm.test(\"Consent id is present\", () => {",
													"    pm.expect(jsonData.accountConsent).to.have.property(\"id\");",
													"});",
													"",
													"",
													"pm.test(\"Trusted benficiaries are present\", ()=> {",
													"    pm.expect(jsonData.accountConsent.access).to.have.property(\"accountAdditionalInformationAccess\");",
													"    pm.expect(jsonData.accountConsent.access.accountAdditionalInformationAccess).to.have.property(\"trustedBeneficiaries\");",
													"});",
													"",
													"pm.test(\"Trusted benficiaries are empty\", ()=> {",
													"    trustedBeneficiaries = jsonData.accountConsent.access.accountAdditionalInformationAccess.trustedBeneficiaries;",
													"",
													"    pm.expect(trustedBeneficiaries).to.be.empty;",
													"});",
													"",
													"pm.globals.set(\"internal_consent_id\", jsonData.accountConsent.id);",
													"pm.globals.set(\"authorisation_id\", authorisationId);"
												],
												"type": "text/javascript"
											}
										},
										{
											"listen": "prerequest",
											"script": {
												"id": "76f3c3de-adc1-49c3-af7c-2abbe7a02b74",
												"exec": [
													"pm.globals.unset(\"internal_consent_id\");",
													"pm.globals.unset(\"authorisation_id\");"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "GET",
										"header": [],
										"url": {
											"raw": "{{protocol}}://{{url_cms}}/psu-api/v1/ais/consent/redirect/{{redirect_id}}",
											"protocol": "{{protocol}}",
											"host": [
												"{{url_cms}}"
											],
											"path": [
												"psu-api",
												"v1",
												"ais",
												"consent",
												"redirect",
												"{{redirect_id}}"
											]
										}
									},
									"response": []
								}
							],
							"protocolProfileBehavior": {},
							"_postman_isSubFolder": true
						},
						{
							"name": "create without trusted beneficiaries and update with trusted beneficiaries",
							"item": [
								{
									"name": "1. Enable bank offered consent support in ASPSP profile",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "af4a373a-50e3-4962-990f-4750f2262501",
												"exec": [
													"pm.test(\"Status code is 200\", () => {",
													"    pm.response.to.have.status(200);",
													"});",
													""
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "PUT",
										"header": [
											{
												"key": "Content-Type",
												"name": "Content-Type",
												"value": "application/json",
												"type": "text"
											}
										],
										"body": {
											"mode": "raw",
											"raw": "{\n    \"ais\": {\n      \"consentTypes\": {\n        \"bankOfferedConsentSupported\": true,\n        \"globalConsentSupported\": false,\n        \"availableAccountsConsentSupported\": true,\n        \"accountAccessFrequencyPerDay\": 4,\n        \"notConfirmedConsentExpirationTimeMs\": 86400000,\n        \"maxConsentValidityDays\": 0,\n        \"trustedBeneficiariesSupported\": true\n      },\n      \"redirectLinkToOnlineBanking\": {\n        \"aisRedirectUrlToAspsp\": \"http://localhost:4200/ais/{redirect-id}/{encrypted-consent-id}\"\n      },\n      \"transactionParameters\": {\n        \"availableBookingStatuses\": [\n          \"BOTH\"\n        ],\n        \"transactionsWithoutBalancesSupported\": false,\n            \"supportedTransactionApplicationTypes\": [\n            \t\"application/json\"\n            ]\n      },\n      \"deltaReportSettings\": {\n        \"entryReferenceFromSupported\": false,\n        \"deltaListSupported\": false\n      },\n      \"scaRequirementsForOneTimeConsents\": {\n        \"scaByOneTimeAvailableAccountsConsentRequired\": true,\n            \"scaByOneTimeGlobalConsentRequired\": true\n      }\n    },\n    \"pis\": {\n      \"supportedPaymentTypeAndProductMatrix\": {\n        \"payments\": [\n          \"sepa-credit-transfers\",\n          \"instant-sepa-credit-transfers\"\n        ]\n      },\n      \"maxTransactionValidityDays\": 0,\n      \"notConfirmedPaymentExpirationTimeMs\": 86400000,\n      \"paymentCancellationAuthorisationMandated\": false,\n      \"redirectLinkToOnlineBanking\": {\n        \"pisRedirectUrlToAspsp\": \"http://localhost:4200/pis/{redirect-id}/{encrypted-payment-id}\",\n        \"pisPaymentCancellationRedirectUrlToAspsp\": \"http://localhost:4200/pis/cancellation/{redirect-id}/{encrypted-payment-id}\",\n        \"paymentCancellationRedirectUrlExpirationTimeMs\": 600000\n      },\n        \"supportedTransactionStatusFormats\": [\n            \"application/json\"\n        ]\n    },\n    \"piis\": {\n      \"piisConsentSupported\": \"NOT_SUPPORTED\"\n    },\n    \"sb\": {\n        \"signingBasketSupported\": false\n    },\n    \"common\": {\n      \"scaRedirectFlow\": \"REDIRECT\",\n      \"startAuthorisationMode\": \"auto\",\n      \"tppSignatureRequired\": false,\n      \"psuInInitialRequestMandated\": false,\n      \"redirectUrlExpirationTimeMs\": 600000,\n      \"authorisationExpirationTimeMs\": 86400000,\n      \"forceXs2aBaseLinksUrl\": false,\n      \"xs2aBaseLinksUrl\": \"http://myhost.com/\",\n      \"supportedAccountReferenceFields\": [\n        \"IBAN\"\n      ],\n      \"multicurrencyAccountLevelSupported\": \"SUBACCOUNT\",\n      \"aisPisSessionsSupported\": false,\n      \"aspspNotificationsSupported\": [\n        \t\"NONE\"\t\n      ],\n     \t\"authorisationConfirmationRequestMandated\": false,\n      \"authorisationConfirmationCheckByXs2a\": false, \n    \t\"checkUriComplianceToDomainSupported\": false \n   }\n}",
											"options": {
												"raw": {
													"language": "json"
												}
											}
										},
										"url": {
											"raw": "{{protocol}}://{{url_aspsp_profile}}/api/v1/aspsp-profile/for-debug/aspsp-settings",
											"protocol": "{{protocol}}",
											"host": [
												"{{url_aspsp_profile}}"
											],
											"path": [
												"api",
												"v1",
												"aspsp-profile",
												"for-debug",
												"aspsp-settings"
											]
										}
									},
									"response": []
								},
								{
									"name": "2. Set redirect SCA approach",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "832558f7-261b-41c6-acfa-9579dbe3150b",
												"exec": [
													"pm.test(\"Status code is 200\", () => {",
													"    pm.response.to.have.status(200);",
													"});",
													""
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "PUT",
										"header": [
											{
												"key": "Content-Type",
												"name": "Content-Type",
												"value": "application/json",
												"type": "text"
											}
										],
										"body": {
											"mode": "raw",
											"raw": "[\n\"REDIRECT\",\n  \"EMBEDDED\",\n  \"DECOUPLED\"\n]"
										},
										"url": {
											"raw": "{{protocol}}://{{url_aspsp_profile}}/api/v1/aspsp-profile/for-debug/sca-approaches",
											"protocol": "{{protocol}}",
											"host": [
												"{{url_aspsp_profile}}"
											],
											"path": [
												"api",
												"v1",
												"aspsp-profile",
												"for-debug",
												"sca-approaches"
											]
										}
									},
									"response": []
								},
								{
									"name": "3. create consent bank offered",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "3a026fd2-14fb-494e-a986-0c0ca6cf10fc",
												"exec": [
													"const jsonData = pm.response.json();",
													"",
													"pm.test(\"Consent Id exists\", () => {",
													"   pm.expect(jsonData).to.have.property('consentId');",
													"});",
													"",
													"pm.test(\"Status code is 201\", () => {",
													"    pm.response.to.have.status(201);",
													"});",
													"",
													"pm.test(\"scaRedirect link exists\", () => {",
													"    pm.expect(jsonData).to.have.property('_links');",
													"    const _links = jsonData._links;",
													"    ",
													"    var scaRedirect = _links.scaRedirect.href;",
													"",
													"    if (scaRedirect === undefined) {",
													"       pm.expect().fail();",
													"    } ",
													"    ",
													"    if (scaRedirect !== undefined) {",
													"        var a = scaRedirect.split('/');",
													"        a.pop();",
													"        const authorisationId = a.pop();",
													"        pm.globals.set(\"authorisation_id\", authorisationId);",
													"    }",
													"",
													"    const scaStatusParts = jsonData._links.scaStatus.href.split('/');",
													"    const redirectId = scaStatusParts.pop() || scaStatusParts.pop();",
													"    pm.globals.set(\"redirect_id\", redirectId);",
													"    ",
													"});",
													"",
													"pm.test(\"Consent status is received\", () => {",
													"    pm.expect(jsonData.consentStatus).to.eql('received');",
													"});",
													"",
													"pm.globals.set(\"consent_id\", jsonData.consentId);"
												],
												"type": "text/javascript"
											}
										},
										{
											"listen": "prerequest",
											"script": {
												"id": "7e4a0e65-f0fc-407e-b3e1-42ec9830f370",
												"exec": [
													"pm.globals.unset(\"consent_id\");"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "POST",
										"header": [
											{
												"key": "accept",
												"value": "application/json",
												"type": "text"
											},
											{
												"key": "PSU-ID",
												"value": "{{psu_id_single}}",
												"type": "text"
											},
											{
												"key": "X-Request-ID",
												"value": "{{x_request_id}}",
												"type": "text"
											},
											{
												"key": "Content-Type",
												"value": "application/json",
												"type": "text"
											},
											{
												"key": "psu-ip-address",
												"value": "{{ip_address}}",
												"type": "text"
											},
											{
												"key": "tpp-redirect-uri",
												"value": "{{tpp-redirect-uri}}",
												"type": "text"
											}
										],
										"body": {
											"mode": "raw",
											"raw": "{\n  \"access\": {\n        \"accounts\": [\n            {\n                \"currency\": \"EUR\",\n                \"iban\": \"{{iban_single}}\"\n            }\n        ],\n        \"balances\": [\n            {\n                \"currency\": \"EUR\",\n                \"iban\": \"{{iban_single}}\"\n            }\n        ],\n        \"transactions\": [\n            {\n                \"currency\": \"EUR\",\n                \"iban\": \"{{iban_single}}\"\n            }\n        ]\n    },\n  \"combinedServiceIndicator\": false,\n  \"frequencyPerDay\": 10,\n  \"recurringIndicator\": true,\n  \"validUntil\": \"2021-10-10\"\n}"
										},
										"url": {
											"raw": "{{protocol}}://{{url_xs2a}}/v1/consents",
											"protocol": "{{protocol}}",
											"host": [
												"{{url_xs2a}}"
											],
											"path": [
												"v1",
												"consents"
											]
										}
									},
									"response": []
								},
								{
									"name": "4. Get consent response object by redirect id",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "41054b58-616d-4aca-83ea-8b6724b4b439",
												"exec": [
													"pm.test(\"Status code is 200\", () => {",
													"    pm.response.to.have.status(200);",
													"});",
													"",
													"const jsonData = pm.response.json();",
													"",
													"pm.test(\"Authorisation id is present\", () => {",
													"    pm.expect(jsonData).to.have.property(\"authorisationId\");",
													"});",
													"",
													"const authorisationId = jsonData.authorisationId;",
													"pm.test(\"Authorisation id is correct\", () => {",
													"    pm.expect(authorisationId).to.eql(pm.globals.get(\"redirect_id\"));",
													"});",
													"",
													"pm.test(\"Consent id is present\", () => {",
													"    pm.expect(jsonData.accountConsent).to.have.property(\"id\");",
													"});",
													"",
													"pm.test(\"Trusted benficiaries are absent\", ()=> {",
													"    pm.expect(jsonData.accountConsent.access).to.have.property(\"accountAdditionalInformationAccess\");",
													"    pm.expect(jsonData.accountConsent.access.accountAdditionalInformationAccess).to.not.have.property(\"trustedBeneficiaries\");",
													"});",
													"",
													"pm.globals.set(\"internal_consent_id\", jsonData.accountConsent.id);",
													"pm.globals.set(\"authorisation_id\", authorisationId);"
												],
												"type": "text/javascript"
											}
										},
										{
											"listen": "prerequest",
											"script": {
												"id": "28effa33-7331-4ac0-b2ff-5b46dc109e2c",
												"exec": [
													"pm.globals.unset(\"internal_consent_id\");",
													"pm.globals.unset(\"authorisation_id\");"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "GET",
										"header": [],
										"url": {
											"raw": "{{protocol}}://{{url_cms}}/psu-api/v1/ais/consent/redirect/{{redirect_id}}",
											"protocol": "{{protocol}}",
											"host": [
												"{{url_cms}}"
											],
											"path": [
												"psu-api",
												"v1",
												"ais",
												"consent",
												"redirect",
												"{{redirect_id}}"
											]
										}
									},
									"response": []
								},
								{
									"name": "5. update in cms",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "a56139ae-15d4-4444-9da9-3798c1f6a0d0",
												"exec": [
													"pm.test(\"Status code is 200\", () => {",
													"    pm.response.to.have.status(200);",
													"});"
												],
												"type": "text/javascript"
											}
										},
										{
											"listen": "prerequest",
											"script": {
												"id": "a1e0cc53-e864-41ba-b4dc-30d1ba0763cb",
												"exec": [
													""
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "PUT",
										"header": [
											{
												"key": "Accept",
												"value": "application/json",
												"type": "text"
											},
											{
												"key": "Content-Type",
												"value": "application/json",
												"type": "text"
											},
											{
												"key": "X-Request-ID",
												"value": "{{x_request_id}}",
												"type": "text",
												"disabled": true
											}
										],
										"body": {
											"mode": "raw",
											"raw": "{\n\"accountAccess\": {\n        \"accounts\": [\n            {\n                \"currency\": \"EUR\",\n                \"iban\": \"{{iban_single}}\"\n            }\n        ],\n        \"balances\": [\n            {\n                \"currency\": \"EUR\",\n                \"iban\": \"{{iban_single}}\"\n            }\n        ],\n        \"transactions\": [\n            {\n                \"currency\": \"EUR\",\n                \"iban\": \"{{iban_single}}\"\n            }\n        ],\n        \"accountAdditionalInformationAccess\": {\n             \"trustedBeneficiaries\": [\n                {\n                \"currency\": \"EUR\",\n                \"iban\": \"{{iban_none}}\"\n            }\n            ]\n        }\n    },\n  \"combinedServiceIndicator\": false,\n  \"frequencyPerDay\": 15,\n  \"recurringIndicator\": true,\n  \"validUntil\": \"2025-10-10\"\n}"
										},
										"url": {
											"raw": "{{protocol}}://{{url_cms}}/psu-api/v1/ais/consent/{{internal_consent_id}}/save-access",
											"protocol": "{{protocol}}",
											"host": [
												"{{url_cms}}"
											],
											"path": [
												"psu-api",
												"v1",
												"ais",
												"consent",
												"{{internal_consent_id}}",
												"save-access"
											]
										}
									},
									"response": []
								},
								{
									"name": "6. Get consent response object by redirect id",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "c74fca43-755e-4124-a500-c74319a59137",
												"exec": [
													"pm.test(\"Status code is 200\", () => {",
													"    pm.response.to.have.status(200);",
													"});",
													"",
													"const jsonData = pm.response.json();",
													"",
													"pm.test(\"Authorisation id is present\", () => {",
													"    pm.expect(jsonData).to.have.property(\"authorisationId\");",
													"});",
													"",
													"const authorisationId = jsonData.authorisationId;",
													"pm.test(\"Authorisation id is correct\", () => {",
													"    pm.expect(authorisationId).to.eql(pm.globals.get(\"redirect_id\"));",
													"});",
													"",
													"pm.test(\"Consent id is present\", () => {",
													"    pm.expect(jsonData.accountConsent).to.have.property(\"id\");",
													"});",
													"",
													"pm.test(\"Trusted benficiaries are present\", ()=> {",
													"    pm.expect(jsonData.accountConsent.access).to.have.property(\"accountAdditionalInformationAccess\");",
													"    pm.expect(jsonData.accountConsent.access.accountAdditionalInformationAccess).to.have.property(\"trustedBeneficiaries\");",
													"});",
													"",
													"pm.test(\"Trusted benficiaries are correct\", ()=> {",
													"    trustedBeneficiaries = jsonData.accountConsent.access.accountAdditionalInformationAccess.trustedBeneficiaries[0];",
													"",
													"    pm.expect(trustedBeneficiaries.iban).to.equal('DE69760700240340283600');",
													"});",
													"",
													"pm.globals.set(\"internal_consent_id\", jsonData.accountConsent.id);",
													"pm.globals.set(\"authorisation_id\", authorisationId);"
												],
												"type": "text/javascript"
											}
										},
										{
											"listen": "prerequest",
											"script": {
												"id": "84363d55-e266-454b-a476-9bddd594ab7a",
												"exec": [
													"pm.globals.unset(\"internal_consent_id\");",
													"pm.globals.unset(\"authorisation_id\");"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "GET",
										"header": [],
										"url": {
											"raw": "{{protocol}}://{{url_cms}}/psu-api/v1/ais/consent/redirect/{{redirect_id}}",
											"protocol": "{{protocol}}",
											"host": [
												"{{url_cms}}"
											],
											"path": [
												"psu-api",
												"v1",
												"ais",
												"consent",
												"redirect",
												"{{redirect_id}}"
											]
										}
									},
									"response": []
								}
							],
							"protocolProfileBehavior": {},
							"_postman_isSubFolder": true
						}
					],
					"protocolProfileBehavior": {},
					"_postman_isSubFolder": true
				},
				{
					"name": "Consent Bank offered with both",
					"item": [
						{
							"name": "1. Enable bank offered consent support in ASPSP profile",
							"event": [
								{
									"listen": "test",
									"script": {
										"id": "ce563b63-fce4-448b-956d-497b9da46be8",
										"exec": [
											"pm.test(\"Status code is 200\", () => {",
											"    pm.response.to.have.status(200);",
											"});",
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"method": "PUT",
								"header": [
									{
										"key": "Content-Type",
										"name": "Content-Type",
										"value": "application/json",
										"type": "text"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n    \"ais\": {\n      \"consentTypes\": {\n        \"bankOfferedConsentSupported\": true,\n        \"globalConsentSupported\": false,\n        \"availableAccountsConsentSupported\": true,\n        \"accountAccessFrequencyPerDay\": 4,\n        \"notConfirmedConsentExpirationTimeMs\": 86400000,\n        \"maxConsentValidityDays\": 0,\n        \"accountOwnerInformationSupported\": true\n      },\n      \"redirectLinkToOnlineBanking\": {\n        \"aisRedirectUrlToAspsp\": \"http://localhost:4200/ais/{redirect-id}/{encrypted-consent-id}\"\n      },\n      \"transactionParameters\": {\n        \"availableBookingStatuses\": [\n          \"BOTH\"\n        ],\n        \"transactionsWithoutBalancesSupported\": false,\n            \"supportedTransactionApplicationTypes\": [\n            \t\"application/json\"\n            ]\n      },\n      \"deltaReportSettings\": {\n        \"entryReferenceFromSupported\": false,\n        \"deltaListSupported\": false\n      },\n      \"scaRequirementsForOneTimeConsents\": {\n        \"scaByOneTimeAvailableAccountsConsentRequired\": true,\n            \"scaByOneTimeGlobalConsentRequired\": true\n      }\n    },\n    \"pis\": {\n      \"supportedPaymentTypeAndProductMatrix\": {\n        \"payments\": [\n          \"sepa-credit-transfers\",\n          \"instant-sepa-credit-transfers\"\n        ]\n      },\n      \"maxTransactionValidityDays\": 0,\n      \"notConfirmedPaymentExpirationTimeMs\": 86400000,\n      \"paymentCancellationAuthorisationMandated\": false,\n      \"redirectLinkToOnlineBanking\": {\n        \"pisRedirectUrlToAspsp\": \"http://localhost:4200/pis/{redirect-id}/{encrypted-payment-id}\",\n        \"pisPaymentCancellationRedirectUrlToAspsp\": \"http://localhost:4200/pis/cancellation/{redirect-id}/{encrypted-payment-id}\",\n        \"paymentCancellationRedirectUrlExpirationTimeMs\": 600000\n      },\n        \"supportedTransactionStatusFormats\": [\n            \"application/json\"\n        ]\n    },\n    \"piis\": {\n      \"piisConsentSupported\": \"NOT_SUPPORTED\"\n    },\n    \"sb\": {\n        \"signingBasketSupported\": false\n    },\n    \"common\": {\n      \"scaRedirectFlow\": \"REDIRECT\",\n      \"startAuthorisationMode\": \"auto\",\n      \"tppSignatureRequired\": false,\n      \"psuInInitialRequestMandated\": false,\n      \"redirectUrlExpirationTimeMs\": 600000,\n      \"authorisationExpirationTimeMs\": 86400000,\n      \"forceXs2aBaseLinksUrl\": false,\n      \"xs2aBaseLinksUrl\": \"http://myhost.com/\",\n      \"supportedAccountReferenceFields\": [\n        \"IBAN\"\n      ],\n      \"multicurrencyAccountLevelSupported\": \"SUBACCOUNT\",\n      \"aisPisSessionsSupported\": false,\n      \"aspspNotificationsSupported\": [\n        \t\"NONE\"\t\n      ],\n     \t\"authorisationConfirmationRequestMandated\": false,\n      \"authorisationConfirmationCheckByXs2a\": false, \n    \t\"checkUriComplianceToDomainSupported\": false \n   }\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{protocol}}://{{url_aspsp_profile}}/api/v1/aspsp-profile/for-debug/aspsp-settings",
									"protocol": "{{protocol}}",
									"host": [
										"{{url_aspsp_profile}}"
									],
									"path": [
										"api",
										"v1",
										"aspsp-profile",
										"for-debug",
										"aspsp-settings"
									]
								}
							},
							"response": []
						},
						{
							"name": "2. Set redirect SCA approach",
							"event": [
								{
									"listen": "test",
									"script": {
										"id": "ad0866ab-de20-4658-9783-05f0aa0a47a3",
										"exec": [
											"pm.test(\"Status code is 200\", () => {",
											"    pm.response.to.have.status(200);",
											"});",
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"method": "PUT",
								"header": [
									{
										"key": "Content-Type",
										"name": "Content-Type",
										"value": "application/json",
										"type": "text"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "[\n\"REDIRECT\",\n  \"EMBEDDED\",\n  \"DECOUPLED\"\n]"
								},
								"url": {
									"raw": "{{protocol}}://{{url_aspsp_profile}}/api/v1/aspsp-profile/for-debug/sca-approaches",
									"protocol": "{{protocol}}",
									"host": [
										"{{url_aspsp_profile}}"
									],
									"path": [
										"api",
										"v1",
										"aspsp-profile",
										"for-debug",
										"sca-approaches"
									]
								}
							},
							"response": []
						},
						{
							"name": "3. create consent bank offered",
							"event": [
								{
									"listen": "test",
									"script": {
										"id": "dac1407f-5bf8-47dd-8d30-d9c14698d6d9",
										"exec": [
											"const jsonData = pm.response.json();",
											"",
											"pm.test(\"Consent Id exists\", () => {",
											"   pm.expect(jsonData).to.have.property('consentId');",
											"});",
											"",
											"pm.test(\"Status code is 201\", () => {",
											"    pm.response.to.have.status(201);",
											"});",
											"",
											"pm.test(\"scaRedirect link exists\", () => {",
											"    pm.expect(jsonData).to.have.property('_links');",
											"    const _links = jsonData._links;",
											"    ",
											"    var scaRedirect = _links.scaRedirect.href;",
											"",
											"    if (scaRedirect === undefined) {",
											"       pm.expect().fail();",
											"    } ",
											"    ",
											"    if (scaRedirect !== undefined) {",
											"        var a = scaRedirect.split('/');",
											"        a.pop();",
											"        const authorisationId = a.pop();",
											"        pm.globals.set(\"authorisation_id\", authorisationId);",
											"    }",
											"",
											"    const scaStatusParts = jsonData._links.scaStatus.href.split('/');",
											"    const redirectId = scaStatusParts.pop() || scaStatusParts.pop();",
											"    pm.globals.set(\"redirect_id\", redirectId);",
											"    ",
											"});",
											"",
											"pm.test(\"Consent status is received\", () => {",
											"    pm.expect(jsonData.consentStatus).to.eql('received');",
											"});",
											"",
											"pm.globals.set(\"consent_id\", jsonData.consentId);"
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "prerequest",
									"script": {
										"id": "bbdd2b8c-c6a2-400f-8796-bcd4d8353286",
										"exec": [
											"pm.globals.unset(\"consent_id\");"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "accept",
										"value": "application/json",
										"type": "text"
									},
									{
										"key": "PSU-ID",
										"value": "{{psu_id_single}}",
										"type": "text"
									},
									{
										"key": "X-Request-ID",
										"value": "{{x_request_id}}",
										"type": "text"
									},
									{
										"key": "Content-Type",
										"value": "application/json",
										"type": "text"
									},
									{
										"key": "psu-ip-address",
										"value": "{{ip_address}}",
										"type": "text"
									},
									{
										"key": "tpp-redirect-uri",
										"value": "{{tpp-redirect-uri}}",
										"type": "text"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"access\": {\n        \"accounts\": [\n            {\n                \"currency\": \"EUR\",\n                \"iban\": \"{{iban_single}}\"\n            }\n        ],\n        \"balances\": [\n            {\n                \"currency\": \"EUR\",\n                \"iban\": \"{{iban_single}}\"\n            }\n        ],\n        \"transactions\": [\n            {\n                \"currency\": \"EUR\",\n                \"iban\": \"{{iban_single}}\"\n            }\n        ]\n    },\n  \"combinedServiceIndicator\": false,\n  \"frequencyPerDay\": 10,\n  \"recurringIndicator\": true,\n  \"validUntil\": \"2021-10-10\"\n}"
								},
								"url": {
									"raw": "{{protocol}}://{{url_xs2a}}/v1/consents",
									"protocol": "{{protocol}}",
									"host": [
										"{{url_xs2a}}"
									],
									"path": [
										"v1",
										"consents"
									]
								}
							},
							"response": []
						},
						{
							"name": "4. Get consent response object by redirect id",
							"event": [
								{
									"listen": "test",
									"script": {
										"id": "3d5b285a-c0b4-46e5-ad1a-489d5b7a4a98",
										"exec": [
											"pm.test(\"Status code is 200\", () => {",
											"    pm.response.to.have.status(200);",
											"});",
											"",
											"const jsonData = pm.response.json();",
											"",
											"pm.test(\"Authorisation id is present\", () => {",
											"    pm.expect(jsonData).to.have.property(\"authorisationId\");",
											"});",
											"",
											"const authorisationId = jsonData.authorisationId;",
											"pm.test(\"Authorisation id is correct\", () => {",
											"    pm.expect(authorisationId).to.eql(pm.globals.get(\"redirect_id\"));",
											"});",
											"",
											"pm.test(\"Consent id is present\", () => {",
											"    pm.expect(jsonData.accountConsent).to.have.property(\"id\");",
											"});",
											"",
											"pm.test(\"Owner name is absent\", ()=> {",
											"    pm.expect(jsonData.accountConsent.access).to.have.property(\"accountAdditionalInformationAccess\");",
											"    pm.expect(jsonData.accountConsent.access.accountAdditionalInformationAccess).to.not.have.property(\"ownerName\");",
											"});",
											"",
											"pm.globals.set(\"internal_consent_id\", jsonData.accountConsent.id);",
											"pm.globals.set(\"authorisation_id\", authorisationId);"
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "prerequest",
									"script": {
										"id": "7d31ea0d-fa30-4c5b-8643-13469fc44fce",
										"exec": [
											"pm.globals.unset(\"internal_consent_id\");",
											"pm.globals.unset(\"authorisation_id\");"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{protocol}}://{{url_cms}}/psu-api/v1/ais/consent/redirect/{{redirect_id}}",
									"protocol": "{{protocol}}",
									"host": [
										"{{url_cms}}"
									],
									"path": [
										"psu-api",
										"v1",
										"ais",
										"consent",
										"redirect",
										"{{redirect_id}}"
									]
								}
							},
							"response": []
						},
						{
							"name": "5. update in cms",
							"event": [
								{
									"listen": "test",
									"script": {
										"id": "752e6f7e-afda-431d-a4b3-6e663533bb7f",
										"exec": [
											"pm.test(\"Status code is 200\", () => {",
											"    pm.response.to.have.status(200);",
											"});"
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "prerequest",
									"script": {
										"id": "ed55bcaa-3ab0-4394-bfe7-260bd480d75a",
										"exec": [
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"method": "PUT",
								"header": [
									{
										"key": "Accept",
										"value": "application/json",
										"type": "text"
									},
									{
										"key": "Content-Type",
										"value": "application/json",
										"type": "text"
									},
									{
										"key": "X-Request-ID",
										"value": "{{x_request_id}}",
										"type": "text",
										"disabled": true
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n\"accountAccess\": {\n        \"accounts\": [\n            {\n                \"currency\": \"EUR\",\n                \"iban\": \"{{iban_single}}\"\n            }\n        ],\n        \"balances\": [\n            {\n                \"currency\": \"EUR\",\n                \"iban\": \"{{iban_single}}\"\n            }\n        ],\n        \"transactions\": [\n            {\n                \"currency\": \"EUR\",\n                \"iban\": \"{{iban_single}}\"\n            }\n        ],\n        \"accountAdditionalInformationAccess\": {\n            \"ownerName\": [\n                {\n                \"currency\": \"EUR\",\n                \"iban\": \"{{iban_none}}\"\n            }\n            ],\n              \"trustedBeneficiaries\": [\n                {\n                \"currency\": \"EUR\",\n                \"iban\": \"{{iban_none}}\"\n            }\n            ]\n        }\n    },\n  \"combinedServiceIndicator\": false,\n  \"frequencyPerDay\": 15,\n  \"recurringIndicator\": true,\n  \"validUntil\": \"2025-10-10\"\n}"
								},
								"url": {
									"raw": "{{protocol}}://{{url_cms}}/psu-api/v1/ais/consent/{{internal_consent_id}}/save-access",
									"protocol": "{{protocol}}",
									"host": [
										"{{url_cms}}"
									],
									"path": [
										"psu-api",
										"v1",
										"ais",
										"consent",
										"{{internal_consent_id}}",
										"save-access"
									]
								}
							},
							"response": []
						},
						{
							"name": "6. Get consent response object by redirect id",
							"event": [
								{
									"listen": "test",
									"script": {
										"id": "a9d6c051-1b0d-447b-a2dc-c4d0a0081be3",
										"exec": [
											"pm.test(\"Status code is 200\", () => {",
											"    pm.response.to.have.status(200);",
											"});",
											"",
											"const jsonData = pm.response.json();",
											"",
											"pm.test(\"Authorisation id is present\", () => {",
											"    pm.expect(jsonData).to.have.property(\"authorisationId\");",
											"});",
											"",
											"const authorisationId = jsonData.authorisationId;",
											"pm.test(\"Authorisation id is correct\", () => {",
											"    pm.expect(authorisationId).to.eql(pm.globals.get(\"redirect_id\"));",
											"});",
											"",
											"pm.test(\"Consent id is present\", () => {",
											"    pm.expect(jsonData.accountConsent).to.have.property(\"id\");",
											"});",
											"",
											"pm.test(\"Owner name is present\", ()=> {",
											"    pm.expect(jsonData.accountConsent.access).to.have.property(\"accountAdditionalInformationAccess\");",
											"    pm.expect(jsonData.accountConsent.access.accountAdditionalInformationAccess).to.have.property(\"ownerName\");",
											"});",
											"",
											"pm.test(\"Owner name is correct\", ()=> {",
											"    ownerName = jsonData.accountConsent.access.accountAdditionalInformationAccess.ownerName[0];",
											"",
											"    pm.expect(ownerName.iban).to.equal('DE69760700240340283600');",
											"});",
											"",
											"",
											"pm.test(\"Trusted beneficiaries is present\", ()=> {",
											"    pm.expect(jsonData.accountConsent.access).to.have.property(\"accountAdditionalInformationAccess\");",
											"    pm.expect(jsonData.accountConsent.access.accountAdditionalInformationAccess).to.have.property(\"trustedBeneficiaries\");",
											"});",
											"",
											"pm.test(\"Trusted beneficiaries is correct\", ()=> {",
											"    trustedBeneficiaries = jsonData.accountConsent.access.accountAdditionalInformationAccess.trustedBeneficiaries[0];",
											"",
											"    pm.expect(trustedBeneficiaries.iban).to.equal('DE69760700240340283600');",
											"});",
											"",
											"pm.globals.set(\"internal_consent_id\", jsonData.accountConsent.id);",
											"pm.globals.set(\"authorisation_id\", authorisationId);"
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "prerequest",
									"script": {
										"id": "bfd563ed-10ca-4e80-a2c1-dbd35324248f",
										"exec": [
											"pm.globals.unset(\"internal_consent_id\");",
											"pm.globals.unset(\"authorisation_id\");"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{protocol}}://{{url_cms}}/psu-api/v1/ais/consent/redirect/{{redirect_id}}",
									"protocol": "{{protocol}}",
									"host": [
										"{{url_cms}}"
									],
									"path": [
										"psu-api",
										"v1",
										"ais",
										"consent",
										"redirect",
										"{{redirect_id}}"
									]
								}
							},
							"response": []
						}
					],
					"protocolProfileBehavior": {},
					"_postman_isSubFolder": true
				}
			],
			"protocolProfileBehavior": {}
		}
	],
	"protocolProfileBehavior": {}
}